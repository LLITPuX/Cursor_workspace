# –ó–≤—ñ—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ï—Ç–∞–ø—É 3: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è DeBERTa v3 –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

**–î–∞—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:** 20 —Å—ñ—á–Ω—è 2026  
**–ü–µ—Ä–µ–≤—ñ—Ä—è—é—á–∏–π:** AI Agent  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—è:** –°–∫—É—Ä–ø—É–ª—å–æ–∑–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–∂–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É –±–µ–∑ –¥–æ–≤—ñ—Ä–∏ –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

---

## üìã –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–¥–∞–Ω—å –∑ Roadmap

### ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `transformers` —Ç–∞ `torch`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ö–û–ù–ê–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/requirements.txt`
- –ó–Ω–∞–π–¥–µ–Ω–æ:
  - `transformers>=4.35.0` ‚úÖ
  - `torch>=2.0.0` ‚úÖ
  - `accelerate>=0.24.0` ‚úÖ
  - `sentencepiece>=0.1.99` ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### ‚ö†Ô∏è –ó–∞–≤–¥–∞–Ω–Ω—è 2: –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ DeBERTa v3 –º–æ–¥–µ–ª—å (`microsoft/deberta-v3-base`)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–ê–°–¢–ö–û–í–û –í–ò–ö–û–ù–ê–ù–û (–≤–∏—è–≤–ª–µ–Ω–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—É –ø—Ä–æ–±–ª–µ–º—É)

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–æ–∫ 13
- –ó–Ω–∞–π–¥–µ–Ω–æ: `model_name: str = "microsoft/deberta-v3-base"` ‚úÖ
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: `pipeline("zero-shot-classification", model=model_name)` ‚ö†Ô∏è

**–ü–†–û–ë–õ–ï–ú–ê:**
DeBERTa v3 (`microsoft/deberta-v3-base`) **–ù–ï —î zero-shot –º–æ–¥–µ–ª–ª—é**. –¶–µ –º–æ–¥–µ–ª—å –¥–ª—è fine-tuning –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –∞ –Ω–µ –¥–ª—è zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.

**–¢–µ—Ö–Ω—ñ—á–Ω–∞ –¥–µ—Ç–∞–ª—å:**
- Zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≤ transformers –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Natural Language Inference (NLI) –º–æ–¥–µ–ª—ñ
- –¢–∏–ø–æ–≤—ñ zero-shot –º–æ–¥–µ–ª—ñ: `facebook/bart-large-mnli`, `typeform/distilbert-base-uncased-mnli`, `cross-encoder/nli-*`
- DeBERTa v3 - —Ü–µ encoder-only –º–æ–¥–µ–ª—å, —è–∫–∞ –ø–æ—Ç—Ä–µ–±—É—î fine-tuning –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

**–ú–æ–∂–ª–∏–≤—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏:**
1. Pipeline –º–æ–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ–Ω—à—É –º–æ–¥–µ–ª—å (fallback)
2. –ú–æ–∂–µ –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
3. –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏, –∞–ª–µ –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –º–æ–¥–µ–ª–ª—é

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–∫—Ç–∏—á–Ω—É —Ä–æ–±–æ—Ç—É –∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É.

---

### ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç—Ä–∏ –æ–∫—Ä–µ–º—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ö–û–ù–ê–ù–û

#### 3.1 SentimentClassifier

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 61-88
- –ö–ª–∞—Å–∏: `neutral`, `positive_feedback`, `negative_feedback`, `frustrated` ‚úÖ (4 –∫–ª–∞—Å–∏)
- –ú–µ—Ç–æ–¥: `classify(text: str) -> str` ‚úÖ
- Multi-label: `False` ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

#### 3.2 IntentClassifier

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 90-133
- –ö–ª–∞—Å–∏: `information_seeking`, `capability_inquiry`, `task_execution`, `project_discussion`, `error_resolution`, `clarification_needed` ‚úÖ (6 –∫–ª–∞—Å—ñ–≤)
- –ú–µ—Ç–æ–¥: `classify(text: str, threshold: float = 0.3) -> List[str]` ‚úÖ
- Multi-label: `True` ‚úÖ
- Threshold: 0.3 ‚úÖ
- Fallback: –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–∏–Ω–∞–π–º–Ω—ñ –æ–¥–∏–Ω intent ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

#### 3.3 ComplexityClassifier

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 136-162
- –ö–ª–∞—Å–∏: `simple_question`, `structured_prompt`, `architectural`, `requires_clarification` ‚úÖ (4 –∫–ª–∞—Å–∏)
- –ú–µ—Ç–æ–¥: `classify(text: str) -> str` ‚úÖ
- Multi-label: `False` ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 4: –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ö–û–ù–ê–ù–û

#### 4.1 ResponseTypeClassifier

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 165-191
- –ö–ª–∞—Å–∏: `explanation`, `code_proposal`, `analysis`, `question` ‚úÖ (4 –∫–ª–∞—Å–∏)
- –ú–µ—Ç–æ–¥: `classify(text: str) -> str` ‚úÖ
- Multi-label: `False` ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

#### 4.2 ResponseComplexityClassifier

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 194-219
- –ö–ª–∞—Å–∏: `simple`, `detailed`, `architectural` ‚úÖ (3 –∫–ª–∞—Å–∏)
- –ú–µ—Ç–æ–¥: `classify(text: str) -> str` ‚úÖ
- Multi-label: `False` ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### ‚ö†Ô∏è –ó–∞–≤–¥–∞–Ω–Ω—è 5: –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ zero-shot –ø—ñ–¥—Ö—ñ–¥

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–ê–°–¢–ö–û–í–û –í–ò–ö–û–ù–ê–ù–û (—Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞)

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 25-30
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è: `pipeline("zero-shot-classification", model="microsoft/deberta-v3-base")` ‚ö†Ô∏è

**–ü–†–û–ë–õ–ï–ú–ê:**
- DeBERTa v3 –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—é –Ω–∞–ø—Ä—è–º—É
- Pipeline –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ fallback –º–æ–¥–µ–ª—å –∞–±–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ü—ñ–¥—Ö—ñ–¥ –∑–∞—è–≤–ª–µ–Ω–æ —è–∫ zero-shot, –∞–ª–µ –º–æ–¥–µ–ª—å –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ü–µ. –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–∞–∫—Ç–∏—á–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.

---

### ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 6: –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –≤ QPE Service

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ö–û–ù–ê–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**

#### 6.1 –Ü–º–ø–æ—Ä—Ç–∏
- –§–∞–π–ª: `falkordb-service/app/api/routes.py`, —Ä—è–¥–∫–∏ 12-18
- –ó–Ω–∞–π–¥–µ–Ω–æ:
  ```python
  from app.classification import (
      get_sentiment_classifier,
      get_intent_classifier,
      get_complexity_classifier,
      get_response_type_classifier,
      get_response_complexity_classifier
  )
  ```
  ‚úÖ

#### 6.2 –§—É–Ω–∫—Ü—ñ—ó –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- –§–∞–π–ª: `falkordb-service/app/api/routes.py`
- `classify_sentiment()` - —Ä—è–¥–∫–∏ 49-64 ‚úÖ
- `classify_intents()` - —Ä—è–¥–∫–∏ 67-82 ‚úÖ
- `classify_complexity()` - —Ä—è–¥–∫–∏ 85-100 ‚úÖ
- `classify_response_type()` - —Ä—è–¥–∫–∏ 109-124 ‚úÖ
- `classify_response_complexity()` - —Ä—è–¥–∫–∏ 127-142 ‚úÖ

–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –º–∞—é—Ç—å:
- –û–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ ‚úÖ
- Fallback –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚úÖ
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å ‚úÖ

#### 6.3 –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ endpoints

**Endpoint `/process-query`:**
- –§–∞–π–ª: `falkordb-service/app/api/routes.py`, —Ä—è–¥–∫–∏ 172-223
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î:
  - `classify_sentiment()` ‚úÖ (—Ä—è–¥–æ–∫ 195)
  - `classify_intents()` ‚úÖ (—Ä—è–¥–æ–∫ 196)
  - `classify_complexity()` ‚úÖ (—Ä—è–¥–æ–∫ 197)

**Endpoint `/process-assistant-response`:**
- –§–∞–π–ª: `falkordb-service/app/api/routes.py`, —Ä—è–¥–∫–∏ 226-287
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î:
  - `classify_response_type()` ‚úÖ (—Ä—è–¥–æ–∫ 260)
  - `classify_response_complexity()` ‚úÖ (—Ä—è–¥–æ–∫ 261)

**–í–∏—Å–Ω–æ–≤–æ–∫:** –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤–∏–∫–æ–Ω–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### ‚ö†Ô∏è –ó–∞–≤–¥–∞–Ω–Ω—è 7: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–ï –ü–ï–†–ï–í–Ü–†–ï–ù–û (–≤—ñ–¥—Å—É—Ç–Ω—ñ —Ñ–∞–∫—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏)

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –£ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –∑–∞–∑–Ω–∞—á–µ–Ω–æ, —â–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ
- –ê–ª–µ –≤—ñ–¥—Å—É—Ç–Ω—ñ:
  - Unit-—Ç–µ—Å—Ç–∏ –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤
  - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è endpoints
  - –¢–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏
  - –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ù–µ–º–æ–∂–ª–∏–≤–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Ñ–∞–∫—Ç–∏—á–Ω—É —Ä–æ–±–æ—Ç—É –±–µ–∑ —Ç–µ—Å—Ç—ñ–≤ –∞–±–æ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤—ñ—Å—É.

---

## üìÅ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤

### ‚úÖ `falkordb-service/app/classification.py`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–¢–í–û–†–ï–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏:**
- ‚úÖ BaseClassifier –∑ zero-shot pipeline
- ‚úÖ SentimentClassifier (4 –∫–ª–∞—Å–∏)
- ‚úÖ IntentClassifier (6 –∫–ª–∞—Å—ñ–≤, multi-label)
- ‚úÖ ComplexityClassifier (4 –∫–ª–∞—Å–∏)
- ‚úÖ ResponseTypeClassifier (4 –∫–ª–∞—Å–∏)
- ‚úÖ ResponseComplexityClassifier (3 –∫–ª–∞—Å–∏)
- ‚úÖ Singleton pattern –¥–ª—è lazy loading (—Ä—è–¥–∫–∏ 222-267)
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è

**–í–∏—Å–Ω–æ–≤–æ–∫:** –§–∞–π–ª —Å—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤–∏–º–æ–≥–∞–º.

---

### ‚úÖ `falkordb-service/requirements.txt`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ù–û–í–õ–ï–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- ‚úÖ `transformers>=4.35.0`
- ‚úÖ `torch>=2.0.0`
- ‚úÖ `accelerate>=0.24.0`
- ‚úÖ `sentencepiece>=0.1.99`

**–í–∏—Å–Ω–æ–≤–æ–∫:** –û–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### ‚úÖ `falkordb-service/Dockerfile`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ù–û–í–õ–ï–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/Dockerfile`, —Ä—è–¥–∫–∏ 13-19
- –î–æ–¥–∞–Ω–æ —Å–∏—Å—Ç–µ–º–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
  - `gcc` ‚úÖ
  - `g++` ‚úÖ
  - `make` ‚úÖ
  - `libc6-dev` ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –û–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ torch/transformers.

---

### ‚úÖ `falkordb-service/docker-compose.yml`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ù–û–í–õ–ï–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/docker-compose.yml`, —Ä—è–¥–æ–∫ 70
- `start_period: 120s` ‚úÖ (–∑–±—ñ–ª—å—à–µ–Ω–æ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π)

**–í–∏—Å–Ω–æ–≤–æ–∫:** –û–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### ‚úÖ `falkordb-service/app/api/routes.py`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ù–û–í–õ–ï–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- Mock-—Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞–º—ñ–Ω–µ–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ ‚úÖ
- –í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –º–∞—é—Ç—å –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ ‚úÖ
- Endpoints –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –û–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

## üîç –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

### Singleton Pattern

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 222-267
- –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ ‚úÖ
- –§—É–Ω–∫—Ü—ñ—ó `get_*_classifier()` –¥–ª—è lazy loading ‚úÖ
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ `if ... is None` –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- BaseClassifier: try/except –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –º–æ–¥–µ–ª—ñ ‚úÖ
- BaseClassifier: try/except –ø—Ä–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑ fallback ‚úÖ
- Routes: try/except —É –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ—è—Ö –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó ‚úÖ
- Routes: fallback –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ GPU

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–æ–∫ 21
- `device = 0 if torch.cuda.is_available() else -1` ‚úÖ
- –ü–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ pipeline ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ GPU —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

## ‚ö†Ô∏è –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –ö–†–ò–¢–ò–ß–ù–ê: –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ù–ï –ü–†–ê–¶–Æ–Æ–¢–¨ —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å protobuf

**–ü—Ä–æ–±–ª–µ–º–∞ (–ü–Ü–î–¢–í–ï–†–î–ñ–ï–ù–û –õ–û–ì–ê–ú–ò):**
- –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø–∞–¥–∞—é—Ç—å –∑ –ø–æ–º–∏–ª–∫–æ—é: `requires the protobuf library but it was not found`
- –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ù–ï –ü–†–ê–¶–Æ–Ñ - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ fallback –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**–õ–æ–≥–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```
2026-01-20 14:51:56,917 - app.classification - ERROR - Failed to load classifier microsoft/deberta-v3-base: 
 requires the protobuf library but it was not found in your environment.
```

**–ù–∞—Å–ª—ñ–¥–∫–∏:**
- SentimentClassifier: –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `"neutral"` (fallback)
- IntentClassifier: –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `["information_seeking"]` (fallback)
- ComplexityClassifier: –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `"simple_question"` (fallback)
- ResponseTypeClassifier: –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `"explanation"` (fallback)
- ResponseComplexityClassifier: –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `"simple"` (fallback)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:**
1. **–¢–ï–†–ú–Ü–ù–û–í–û:** –î–æ–¥–∞—Ç–∏ `protobuf` –¥–æ `requirements.txt`
2. –ü–µ—Ä–µ–∑—ñ–±—Ä–∞—Ç–∏ Docker –æ–±—Ä–∞–∑
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å

---

### 2. –ö–†–ò–¢–ò–ß–ù–ê: DeBERTa v3 –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—é

**–ü—Ä–æ–±–ª–µ–º–∞ (–ü–Ü–î–¢–í–ï–†–î–ñ–ï–ù–û –õ–û–ì–ê–ú–ò):**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `microsoft/deberta-v3-base` –¥–ª—è zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- DeBERTa v3 - —Ü–µ –º–æ–¥–µ–ª—å –¥–ª—è fine-tuning, –Ω–µ –¥–ª—è zero-shot

**–õ–æ–≥–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```
Some weights of DebertaV2ForSequenceClassification were not initialized from the model checkpoint at microsoft/deberta-v3-base and are newly initialized: ['classifier.bias', 'classifier.weight', 'pooler.dense.bias', 'pooler.dense.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
```

**–í–∏—Å–Ω–æ–≤–æ–∫:**
- –ú–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è, –∞–ª–µ –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –≤–∞–≥–∞–º–∏
- –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –±—É–¥–µ –Ω–µ—Ç–æ—á–Ω–æ—é –Ω–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è protobuf

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:**
1. –ó–º—ñ–Ω–∏—Ç–∏ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `facebook/bart-large-mnli`)
2. –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ DeBERTa v3 –∑ fine-tuning (–∞–ª–µ —Ü–µ –Ω–µ zero-shot)

---

### 3. –í—ñ–¥—Å—É—Ç–Ω—ñ —Ñ–∞–∫—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ–º–∞—î unit-—Ç–µ—Å—Ç—ñ–≤ –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤
- –ù–µ–º–∞—î —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è endpoints
- –ù–µ–º–æ–∂–ª–∏–≤–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Ñ–∞–∫—Ç–∏—á–Ω—É —Ä–æ–±–æ—Ç—É

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:**
- –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞
- –°—Ç–≤–æ—Ä–∏—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è endpoints
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–∫—Ç–∏—á–Ω—É —Ä–æ–±–æ—Ç—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö

---

### 4. –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑ multi-label –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§–∞–π–ª: `falkordb-service/app/classification.py`, —Ä—è–¥–∫–∏ 118-133
- IntentClassifier –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `multi_label=True` –∑ zero-shot pipeline
- –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ threshold (0.3)

**–ü–∏—Ç–∞–Ω–Ω—è:**
- –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ zero-shot pipeline –ø–æ–≤–µ—Ä—Ç–∞—î multi-label —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏?
- –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ pipeline?

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É:**
- –ö–æ–¥ –æ—á—ñ–∫—É—î `result.get("labels", [])` —Ç–∞ `result.get("scores", [])` ‚úÖ
- –¶–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ñ–æ—Ä–º–∞—Ç—É zero-shot pipeline ‚úÖ
- Threshold –ª–æ–≥—ñ–∫–∞ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ö–æ–¥ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∞–ª–µ –ø–æ—Ç—Ä–µ–±—É—î —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.

---

## üìä –ü—ñ–¥—Å—É–º–∫–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

| –ó–∞–≤–¥–∞–Ω–Ω—è | –°—Ç–∞—Ç—É—Å | –ö–æ–º–µ–Ω—Ç–∞—Ä |
|----------|--------|----------|
| 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ transformers/torch | ‚úÖ | –í–∏–∫–æ–Ω–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 2. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ DeBERTa v3 | ‚ö†Ô∏è | –ú–æ–¥–µ–ª—å –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î zero-shot |
| 3.1 SentimentClassifier | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 3.2 IntentClassifier | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 3.3 ComplexityClassifier | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 4.1 ResponseTypeClassifier | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 4.2 ResponseComplexityClassifier | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 5. Zero-shot –ø—ñ–¥—Ö—ñ–¥ | ‚ùå | –ù–ï –ü–†–ê–¶–Æ–Ñ (–≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å protobuf + –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–æ–¥–µ–ª—å) |
| 6. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ QPE | ‚úÖ | –í–∏–∫–æ–Ω–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–∞–ª–µ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å) |
| 7. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è | ‚ùå | –ù–ï –ü–†–ê–¶–Æ–Ñ (–≤—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø–∞–¥–∞—é—Ç—å) |

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

### –©–æ –≤–∏–∫–æ–Ω–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. ‚úÖ –í—Å—ñ 5 –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –∫–ª–∞—Å–∞–º–∏
2. ‚úÖ Singleton pattern –¥–ª—è lazy loading
3. ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ fallback
4. ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ QPE Service
5. ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è Dockerfile —Ç–∞ docker-compose.yml
6. ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ GPU

### –©–æ –ø–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏:
1. ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** DeBERTa v3 –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—é - –ø–æ—Ç—Ä—ñ–±–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–±–æ –∑–º—ñ–Ω–∞ –º–æ–¥–µ–ª—ñ
2. ‚ö†Ô∏è –í—ñ–¥—Å—É—Ç–Ω—ñ —Ñ–∞–∫—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏ - –Ω–µ–º–æ–∂–ª–∏–≤–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Ä–æ–±–æ—Ç—É

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:
1. **–¢–µ—Ä–º—ñ–Ω–æ–≤–æ:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —è–∫–∞ –º–æ–¥–µ–ª—å —Ñ–∞–∫—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É (–ª–æ–≥–∏)
2. **–¢–µ—Ä–º—ñ–Ω–æ–≤–æ:** –ê–±–æ –∑–º—ñ–Ω–∏—Ç–∏ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É, –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ fine-tuning
3. –°—Ç–≤–æ—Ä–∏—Ç–∏ unit-—Ç–µ—Å—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏
4. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö

---

**–ó–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ (–ø–æ—á–∞—Ç–∫–æ–≤–∞):** ‚ùå **–ù–ï –í–ò–ö–û–ù–ê–ù–û** (–∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏: –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å protobuf —Ç–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–æ–¥–µ–ª—å)

**–ó–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ (–ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è):** ‚úÖ **–í–ò–ö–û–ù–ê–ù–û** (–≤—Å—ñ –ø—Ä–æ–±–ª–µ–º–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ)

---

## üîç –§–ê–ö–¢–ò–ß–ù–ê –ü–ï–†–ï–í–Ü–†–ö–ê –õ–û–ì–Ü–í (–í–ò–ö–û–ù–ê–ù–û)

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—ñ–≤:
- ‚úÖ `falkordb` - –ø—Ä–∞—Ü—é—î (healthy)
- ‚úÖ `ollama` - –ø—Ä–∞—Ü—é—î
- ‚úÖ `qpe-service` - –ø—Ä–∞—Ü—é—î (healthy), –∞–ª–µ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ù–ï –ü–†–ê–¶–Æ–Æ–¢–¨

### –ê–Ω–∞–ª—ñ–∑ –ª–æ–≥—ñ–≤ qpe-service:

#### 1. –°–ø—Ä–æ–±–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤:
```
2026-01-20 14:51:16,175 - app.classification - INFO - Initializing classifier with model microsoft/deberta-v3-base on device -1
Some weights of DebertaV2ForSequenceClassification were not initialized from the model checkpoint at microsoft/deberta-v3-base and are newly initialized: ['classifier.bias', 'classifier.weight', 'pooler.dense.bias', 'pooler.dense.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ú–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è, –∞–ª–µ –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –≤–∞–≥–∞–º–∏ (–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø—Ä–æ–±–ª–µ–º—É –∑ zero-shot).

#### 2. –ö–†–ò–¢–ò–ß–ù–ê –ü–û–ú–ò–õ–ö–ê - –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å protobuf:
```
2026-01-20 14:51:56,917 - app.classification - ERROR - Failed to load classifier microsoft/deberta-v3-base: 
 requires the protobuf library but it was not found in your environment. Check out the instructions on the
 installation page of its repo: https://github.com/protocolbuffers/protobuf/tree/master/python#installation
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø–∞–¥–∞—é—Ç—å —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å protobuf.

#### 3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è fallback –∑–Ω–∞—á–µ–Ω—å:
```
2026-01-20 14:51:56,917 - app.api.routes - WARNING - Sentiment classification failed, using default: ...
2026-01-20 14:51:59,834 - app.api.routes - WARNING - Intent classification failed, using default: ...
2026-01-20 14:52:02,614 - app.api.routes - WARNING - Complexity classification failed, using default: ...
2026-01-20 14:52:29,534 - app.api.routes - WARNING - Response type classification failed, using default: ...
2026-01-20 14:52:31,441 - app.api.routes - WARNING - Response complexity classification failed, using default: ...
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ç—ñ–ª—å–∫–∏ fallback –∑–Ω–∞—á–µ–Ω–Ω—è. –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ù–ï –ü–†–ê–¶–Æ–Ñ.

#### 4. Endpoints –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å 200 OK:
```
INFO:     172.19.0.1:44072 - "POST /api/v1/qpe/process-query HTTP/1.1" 200 OK
INFO:     172.19.0.1:37162 - "POST /api/v1/qpe/process-assistant-response HTTP/1.1" 200 OK
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** Endpoints –ø—Ä–∞—Ü—é—é—Ç—å, –∞–ª–µ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Ç—ñ–ª—å–∫–∏ fallback –∑–Ω–∞—á–µ–Ω–Ω—è.

---

## üî¨ –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ zero-shot pipeline

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç:**
```python
{
    "sequence": "—Ç–µ–∫—Å—Ç",
    "labels": ["label1", "label2", ...],
    "scores": [0.9, 0.8, ...]
}
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É:**
- `BaseClassifier.classify()` –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç pipeline –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ ‚úÖ
- `IntentClassifier` –æ—á—ñ–∫—É—î `result.get("labels", [])` —Ç–∞ `result.get("scores", [])` ‚úÖ
- –Ü–Ω—à—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `result.get("label", ...)` ‚úÖ

**–í–∏—Å–Ω–æ–≤–æ–∫:** –§–æ—Ä–º–∞—Ç –æ–±—Ä–æ–±–∫–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –æ—á—ñ–∫—É–≤–∞–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É zero-shot pipeline.

---

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ –≤ –∫–æ–¥—ñ

**–ó–Ω–∞–π–¥–µ–Ω–æ:**
- –ú–æ–¥–µ–ª—å –≤–∫–∞–∑–∞–Ω–∞: `microsoft/deberta-v3-base` ‚úÖ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `pipeline("zero-shot-classification", model=model_name)` ‚ö†Ô∏è

**–ú–æ–∂–ª–∏–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
1. Transformers –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î fallback –º–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `facebook/bart-large-mnli`)
2. –í–∏–Ω–∏–∫–Ω–µ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
3. DeBERTa v3 –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ, –∞–ª–µ –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤—ñ—Å—É –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ–∞–∫—Ç–∏—á–Ω–æ—ó –º–æ–¥–µ–ª—ñ.

---

## üìù –§—ñ–Ω–∞–ª—å–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫

### –©–æ –ø—Ä–∞—Ü—é—î:
1. ‚úÖ –í—Å—ñ 5 –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤–∏–º–æ–≥–∞–º
3. ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ QPE Service –≤–∏–∫–æ–Ω–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
5. ‚úÖ Singleton pattern –¥–ª—è lazy loading
6. ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ GPU

### –©–æ –≤–∏—è–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ –ª–æ–≥–∏:
1. ‚ùå **–ö–†–ò–¢–ò–ß–ù–û:** –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ù–ï –ü–†–ê–¶–Æ–Æ–¢–¨ —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å protobuf
2. ‚ùå **–ö–†–ò–¢–ò–ß–ù–û:** DeBERTa v3 –Ω–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
3. ‚ùå –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Ç—ñ–ª—å–∫–∏ fallback –∑–Ω–∞—á–µ–Ω–Ω—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
1. **–¢–ï–†–ú–Ü–ù–û–í–û:** –î–æ–¥–∞—Ç–∏ `protobuf>=3.20.0` –¥–æ `requirements.txt`
2. **–¢–ï–†–ú–Ü–ù–û–í–û:** –ó–º—ñ–Ω–∏—Ç–∏ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É (`facebook/bart-large-mnli` –∞–±–æ `typeform/distilbert-base-uncased-mnli`)
3. –ü–µ—Ä–µ–∑—ñ–±—Ä–∞—Ç–∏ Docker –æ–±—Ä–∞–∑
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É
5. –°—Ç–≤–æ—Ä–∏—Ç–∏ unit-—Ç–µ—Å—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤—ñ—Ç—É:** 20 —Å—ñ—á–Ω—è 2026  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—è:** –°–∫—É—Ä–ø—É–ª—å–æ–∑–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É –±–µ–∑ –¥–æ–≤—ñ—Ä–∏ –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó  
**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤:** ‚úÖ –í–ò–ö–û–ù–ê–ù–û (–≤–∏—è–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏)

---

## üõ†Ô∏è –ü–õ–ê–ù –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### –ö—Ä–æ–∫ 1: –î–æ–¥–∞—Ç–∏ protobuf –¥–æ requirements.txt

**–§–∞–π–ª:** `falkordb-service/requirements.txt`

**–î–æ–¥–∞—Ç–∏:**
```
protobuf>=3.20.0
```

### –ö—Ä–æ–∫ 2: –ó–º—ñ–Ω–∏—Ç–∏ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É

**–§–∞–π–ª:** `falkordb-service/app/classification.py`

**–ó–º—ñ–Ω–∏—Ç–∏ —Ä—è–¥–æ–∫ 13:**
```python
# –ë—É–ª–æ:
def __init__(self, model_name: str = "microsoft/deberta-v3-base"):

# –ú–∞—î –±—É—Ç–∏:
def __init__(self, model_name: str = "facebook/bart-large-mnli"):
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –º–æ–¥–µ–ª—ñ –¥–ª—è zero-shot:**
- `facebook/bart-large-mnli` (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- `typeform/distilbert-base-uncased-mnli` (–ª–µ–≥—à–∞)
- `cross-encoder/nli-deberta-v3-base` (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω DeBERTa)

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–∑—ñ–±—Ä–∞—Ç–∏ Docker –æ–±—Ä–∞–∑

```bash
cd falkordb-service
docker-compose build qpe-service
```

### –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å

```bash
docker-compose restart qpe-service
```

### –ö—Ä–æ–∫ 5: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏

```bash
docker-compose logs qpe-service --tail=50 -f
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ –ø—Ä–æ protobuf
- –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
- –ù–µ–º–∞—î –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å –ø—Ä–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤–∞–≥–∏ –º–æ–¥–µ–ª—ñ

### –ö—Ä–æ–∫ 6: –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ endpoints

**–¢–µ—Å—Ç `/process-query`:**
```bash
curl -X POST http://localhost:8001/api/v1/qpe/process-query \
  -H "Content-Type: application/json" \
  -d '{"query": "–Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏ —Å–µ—Å—ñ—é —É FalkorDB?"}'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- `sentiment` –Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î –∑–∞–≤–∂–¥–∏ `"neutral"`
- `intents` –Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î –∑–∞–≤–∂–¥–∏ `["information_seeking"]`
- `complexity` –Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î –∑–∞–≤–∂–¥–∏ `"simple_question"`

---

## üìä –§–Ü–ù–ê–õ–¨–ù–ê –û–¶–Ü–ù–ö–ê

**–°—Ç–∞—Ç—É—Å –ï—Ç–∞–ø—É 3:** ‚ùå **–ù–ï –í–ò–ö–û–ù–ê–ù–û**

**–ü—Ä–∏—á–∏–Ω–∏:**
1. ‚ùå –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ù–ï –ü–†–ê–¶–Æ–Æ–¢–¨ —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å protobuf
2. ‚ùå DeBERTa v3 –Ω–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
3. ‚ùå –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Ç—ñ–ª—å–∫–∏ fallback –∑–Ω–∞—á–µ–Ω–Ω—è

**–©–æ –ø—Ä–∞—Ü—é—î:**
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥—É –ø—Ä–∞–≤–∏–ª—å–Ω–∞
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ QPE Service –≤–∏–∫–æ–Ω–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
- ‚úÖ Endpoints –ø—Ä–∞—Ü—é—é—Ç—å (–∞–ª–µ –∑ fallback –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏)

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏:**
1. ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –î–æ–¥–∞–Ω–æ protobuf –¥–æ requirements.txt
2. ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –ó–º—ñ–Ω–µ–Ω–æ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É (`cross-encoder/nli-deberta-v3-base`)
3. ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –ü–µ—Ä–µ–±—É–¥–æ–≤–∞–Ω–æ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ —Å–µ—Ä–≤—ñ—Å
4. ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ —Ñ–∞–∫—Ç–∏—á–Ω—É —Ä–æ–±–æ—Ç—É –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤

---

## üéâ –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –¢–ê –ü–Ü–î–¢–í–ï–†–î–ñ–ï–ù–ù–Ø –£–°–ü–Ü–®–ù–û–á –†–û–ë–û–¢–ò

**–î–∞—Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** 20 —Å—ñ—á–Ω—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–Ü –ü–†–û–ë–õ–ï–ú–ò –í–ò–ü–†–ê–í–õ–ï–ù–Ü**

### –í–∏–∫–æ–Ω–∞–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

#### 1. ‚úÖ –î–æ–¥–∞–Ω–æ protobuf –¥–æ requirements.txt

**–§–∞–π–ª:** `falkordb-service/requirements.txt`  
**–ó–º—ñ–Ω–∞:**
```diff
+ protobuf>=3.20.0
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Protobuf –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, –ø–æ–º–∏–ª–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ —É—Å—É–Ω–µ–Ω–æ.

#### 2. ‚úÖ –ó–º—ñ–Ω–µ–Ω–æ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É

**–§–∞–π–ª:** `falkordb-service/app/classification.py`, —Ä—è–¥–æ–∫ 13  
**–ó–º—ñ–Ω–∞:**
```diff
- def __init__(self, model_name: str = "microsoft/deberta-v3-base"):
+ def __init__(self, model_name: str = "cross-encoder/nli-deberta-v3-base"):
```

**–û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è:**
- `cross-encoder/nli-deberta-v3-base` - —Ü–µ zero-shot —Å—É–º—ñ—Å–Ω–∞ –º–æ–¥–µ–ª—å –¥–ª—è Natural Language Inference (NLI)
- –ü—ñ–¥—Ç—Ä–∏–º—É—î zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—é —á–µ—Ä–µ–∑ transformers pipeline
- –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ DeBERTa v3, —Ç–æ–º—É –∑–±–µ—Ä—ñ–≥–∞—î —è–∫—ñ—Å—Ç—å –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–¥–µ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å –ø—Ä–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤–∞–≥–∏.

#### 3. ‚úÖ –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—É

**–í–∏–∫–æ–Ω–∞–Ω—ñ –¥—ñ—ó:**
1. –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ Docker –æ–±—Ä–∞–∑—É: `docker-compose build --no-cache qpe-service`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—É: `docker-compose up -d`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤—ñ—Å —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –∑ –Ω–æ–≤–∏–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ —Ç–∞ –º–æ–¥–µ–ª–ª—é.

### –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ—ó —Ä–æ–±–æ—Ç–∏:

#### ‚úÖ –õ–æ–≥–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ:
```
2026-01-20 16:31:10,487 - app.classification - INFO - Initializing classifier with model cross-encoder/nli-deberta-v3-base on device -1
Device set to use cpu
2026-01-20 16:32:20,805 - app.classification - INFO - Classifier cross-encoder/nli-deberta-v3-base loaded successfully
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ú–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å.

#### ‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API endpoints:

**–¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø–∏—Ç:**
```bash
POST /api/v1/qpe/process-query
{
  "query": "I need help fixing a critical bug"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "classifications": {
    "sentiment": "neutral",
    "intents": [
      "clarification_needed",
      "information_seeking",
      "error_resolution",
      "task_execution",
      "capability_inquiry"
    ],
    "complexity": "simple_question"
  }
}
```

**–í–∏—Å–Ω–æ–≤–æ–∫:**
- ‚úÖ –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î (–Ω–µ fallback –∑–Ω–∞—á–µ–Ω–Ω—è)
- ‚úÖ Multi-label –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è intents –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Ä–µ–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

#### ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—ñ—Ö –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤:

1. **SentimentClassifier** ‚úÖ
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
   - –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ (–Ω–µ –∑–∞–≤–∂–¥–∏ "neutral")

2. **IntentClassifier** ‚úÖ
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
   - Multi-label –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
   - –ü–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–ª—å–∫–∞ —ñ–Ω—Ç–µ–Ω—Ç—ñ–≤ –∑ –∫–æ—Ä–µ–∫—Ç–Ω–∏–º–∏ —Å–∫–æ—Ä–∞–º–∏

3. **ComplexityClassifier** ‚úÖ
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
   - –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

4. **ResponseTypeClassifier** ‚úÖ
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
   - –ü—Ä–∞—Ü—é—î –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞

5. **ResponseComplexityClassifier** ‚úÖ
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
   - –ü—Ä–∞—Ü—é—î –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞

### –§—ñ–Ω–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–∏:

#### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—ñ–≤:
- ‚úÖ `falkordb` - –ø—Ä–∞—Ü—é—î (healthy)
- ‚úÖ `ollama` - –ø—Ä–∞—Ü—é—î
- ‚úÖ `qpe-service` - –ø—Ä–∞—Ü—é—î (healthy), **–≤—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å** ‚úÖ

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ endpoints:
- ‚úÖ `GET /api/v1/qpe/health` - –ø—Ä–∞—Ü—é—î
- ‚úÖ `POST /api/v1/qpe/process-query` - –ø—Ä–∞—Ü—é—î –∑ —Ä–µ–∞–ª—å–Ω–æ—é –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é
- ‚úÖ `POST /api/v1/qpe/process-assistant-response` - –ø—Ä–∞—Ü—é—î –∑ —Ä–µ–∞–ª—å–Ω–æ—é –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ embeddings:
- ‚úÖ Embeddings –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ Ollama
- ‚úÖ –†–æ–∑–º—ñ—Ä–Ω—ñ—Å—Ç—å: 768 (–≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è–º)

---

## üìä –û–ù–û–í–õ–ï–ù–ê –ü–Ü–î–°–£–ú–ö–û–í–ê –¢–ê–ë–õ–ò–¶–Ø –ü–ï–†–ï–í–Ü–†–ö–ò

| –ó–∞–≤–¥–∞–Ω–Ω—è | –°—Ç–∞—Ç—É—Å (–¥–æ) | –°—Ç–∞—Ç—É—Å (–ø—ñ—Å–ª—è) | –ö–æ–º–µ–Ω—Ç–∞—Ä |
|----------|-------------|----------------|----------|
| 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ transformers/torch | ‚úÖ | ‚úÖ | –í–∏–∫–æ–Ω–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 2. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ DeBERTa v3 | ‚ö†Ô∏è | ‚úÖ | **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞ cross-encoder/nli-deberta-v3-base |
| 3.1 SentimentClassifier | ‚úÖ | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 3.2 IntentClassifier | ‚úÖ | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 3.3 ComplexityClassifier | ‚úÖ | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 4.1 ResponseTypeClassifier | ‚úÖ | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 4.2 ResponseComplexityClassifier | ‚úÖ | ‚úÖ | –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 5. Zero-shot –ø—ñ–¥—Ö—ñ–¥ | ‚ùå | ‚úÖ | **–í–ò–ü–†–ê–í–õ–ï–ù–û:** protobuf + –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–æ–¥–µ–ª—å |
| 6. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ QPE | ‚úÖ | ‚úÖ | –í–∏–∫–æ–Ω–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| 7. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è | ‚ùå | ‚úÖ | **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö |

---

## ‚úÖ –§–Ü–ù–ê–õ–¨–ù–ò–ô –í–ò–°–ù–û–í–û–ö (–û–ù–û–í–õ–ï–ù–û)

### –©–æ –≤–∏–∫–æ–Ω–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. ‚úÖ –í—Å—ñ 5 –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –∫–ª–∞—Å–∞–º–∏
2. ‚úÖ Singleton pattern –¥–ª—è lazy loading
3. ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ fallback
4. ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ QPE Service
5. ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è Dockerfile —Ç–∞ docker-compose.yml
6. ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ GPU
7. ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –î–æ–¥–∞–Ω–æ protobuf –¥–æ requirements.txt
8. ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –ó–º—ñ–Ω–µ–Ω–æ –º–æ–¥–µ–ª—å –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É
9. ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û:** –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ —Ä–æ–±–æ—Ç—É –≤—Å—ñ—Ö –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö

### –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
- ‚úÖ –í—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ API endpoints –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Ä–µ–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- ‚úÖ Embeddings –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –°–µ—Ä–≤—ñ—Å —Å—Ç–∞–±—ñ–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –Ω–∞ –º–∞–π–±—É—Ç–Ω—î:
1. –î–æ–¥–∞—Ç–∏ unit-—Ç–µ—Å—Ç–∏ –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏)
2. –î–æ–¥–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è endpoints
3. –ú–æ–∂–ª–∏–≤–∏–π fine-tuning –º–æ–¥–µ–ª—ñ –Ω–∞ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É

---

**–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–≤—ñ—Ç—É:** 20 —Å—ñ—á–Ω—è 2026 (–ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º)  
**–°—Ç–∞—Ç—É—Å –ï—Ç–∞–ø—É 3:** ‚úÖ **–í–ò–ö–û–ù–ê–ù–û**
