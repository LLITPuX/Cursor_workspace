---
description: Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸ React + TypeScript Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±ĞºĞ¸. ĞĞºÑ‚Ğ¸Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ Ğ¿Ñ€Ğ¸ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ñ– Ğ· .tsx Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸.
globs: ["**/*.tsx", "**/components/**/*.ts"]
alwaysApply: false
---

# âš›ï¸ React + TypeScript â€” Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸ Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±ĞºĞ¸

## ğŸ“¦ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°

```tsx
// 1. Imports
import { useState, useCallback, memo } from "react";
import type { ReactNode } from "react";

// 2. Types
interface ButtonProps {
  children: ReactNode;
  variant?: "primary" | "secondary" | "danger";
  size?: "sm" | "md" | "lg";
  disabled?: boolean;
  loading?: boolean;
  onClick?: () => void;
}

// 3. Component
export const Button = memo(function Button({
  children,
  variant = "primary",
  size = "md",
  disabled = false,
  loading = false,
  onClick,
}: ButtonProps) {
  const handleClick = useCallback(() => {
    if (!disabled && !loading && onClick) {
      onClick();
    }
  }, [disabled, loading, onClick]);

  return (
    <button
      className={`btn btn-${variant} btn-${size}`}
      disabled={disabled || loading}
      onClick={handleClick}
    >
      {loading ? <Spinner /> : children}
    </button>
  );
});
```

## ğŸ¯ Props Ñ‚Ğ¸Ğ¿Ñ–Ğ·Ğ°Ñ†Ñ–Ñ

```tsx
// âœ… Interface Ğ´Ğ»Ñ props
interface UserCardProps {
  user: User;
  onEdit: (id: number) => void;
  onDelete: (id: number) => Promise<void>;
}

// âœ… Children types
interface LayoutProps {
  children: ReactNode;  // Any valid React child
}

interface TitleProps {
  children: string;     // Only string
}

// âœ… HTML element props extension
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label: string;
  error?: string;
}

// âœ… Polymorphic components
interface BoxProps<T extends React.ElementType> {
  as?: T;
  children: ReactNode;
}

type BoxPropsWithRef<T extends React.ElementType> = BoxProps<T> &
  Omit<React.ComponentPropsWithoutRef<T>, keyof BoxProps<T>>;
```

## ğŸª Custom Hooks

```tsx
// âœ… Naming: use* prefix
function useUser(userId: number) {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);

  useEffect(() => {
    let cancelled = false;

    async function fetchUser() {
      try {
        setLoading(true);
        const data = await api.getUser(userId);
        if (!cancelled) {
          setUser(data);
        }
      } catch (err) {
        if (!cancelled) {
          setError(err instanceof Error ? err : new Error("Unknown error"));
        }
      } finally {
        if (!cancelled) {
          setLoading(false);
        }
      }
    }

    fetchUser();

    return () => {
      cancelled = true;
    };
  }, [userId]);

  return { user, loading, error };
}

// âœ… Return type annotation for complex hooks
interface UseFormReturn<T> {
  values: T;
  errors: Partial<Record<keyof T, string>>;
  handleChange: (field: keyof T, value: unknown) => void;
  handleSubmit: (e: React.FormEvent) => void;
  reset: () => void;
}

function useForm<T extends Record<string, unknown>>(
  initialValues: T
): UseFormReturn<T> {
  // ...
}
```

## ğŸ“‹ Event Handlers

```tsx
// âœ… ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ° Ñ‚Ğ¸Ğ¿Ñ–Ğ·Ğ°Ñ†Ñ–Ñ
function Form() {
  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    console.log(e.target.value);
  };

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    // ...
  };

  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
    // ...
  };

  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === "Enter") {
      // ...
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <input onChange={handleInputChange} onKeyDown={handleKeyDown} />
      <button onClick={handleClick}>Submit</button>
    </form>
  );
}
```

## ğŸ”„ State Management

```tsx
// âœ… useState Ğ· Ñ‚Ğ¸Ğ¿Ğ¾Ğ¼
const [count, setCount] = useState<number>(0);
const [user, setUser] = useState<User | null>(null);
const [items, setItems] = useState<Item[]>([]);

// âœ… useReducer Ğ´Ğ»Ñ ÑĞºĞ»Ğ°Ğ´Ğ½Ğ¾Ğ³Ğ¾ state
interface State {
  items: Item[];
  loading: boolean;
  error: string | null;
}

type Action =
  | { type: "FETCH_START" }
  | { type: "FETCH_SUCCESS"; payload: Item[] }
  | { type: "FETCH_ERROR"; payload: string };

function reducer(state: State, action: Action): State {
  switch (action.type) {
    case "FETCH_START":
      return { ...state, loading: true, error: null };
    case "FETCH_SUCCESS":
      return { ...state, loading: false, items: action.payload };
    case "FETCH_ERROR":
      return { ...state, loading: false, error: action.payload };
    default:
      return state;
  }
}
```

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/              # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ– UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.test.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ index.ts     # Re-exports
â”‚   â”‚
â”‚   â””â”€â”€ features/        # Feature-specific
â”‚       â””â”€â”€ UserCard/
â”‚
â”œâ”€â”€ hooks/               # Custom hooks
â”‚   â”œâ”€â”€ useUser.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ pages/               # Page components
â”‚
â”œâ”€â”€ services/            # API calls
â”‚
â”œâ”€â”€ types/               # Shared types
â”‚   â”œâ”€â”€ user.ts
â”‚   â””â”€â”€ index.ts
â”‚
â””â”€â”€ utils/               # Helpers
```

## ğŸš« Ğ—Ğ°Ğ±Ğ¾Ñ€Ğ¾Ğ½ĞµĞ½Ğ¾

```tsx
// âŒ Inline object/function Ğ² props (recreation on each render)
<Component style={{ color: "red" }} onClick={() => doSomething()} />

// âœ… ĞœĞµĞ¼Ğ¾Ñ–Ğ·Ğ°Ñ†Ñ–Ñ
const style = useMemo(() => ({ color: "red" }), []);
const handleClick = useCallback(() => doSomething(), []);
<Component style={style} onClick={handleClick} />

// âŒ Index as key (Ğ´Ğ»Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ğ¸Ñ… ÑĞ¿Ğ¸ÑĞºÑ–Ğ²)
items.map((item, index) => <Item key={index} />)

// âœ… Ğ£Ğ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ ID
items.map(item => <Item key={item.id} />)

// âŒ ĞŸÑ€ÑĞ¼Ğ¸Ğ¹ DOM manipulation
document.getElementById("root")!.style.display = "none";

// âœ… useRef
const ref = useRef<HTMLDivElement>(null);
```

## ğŸ”§ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ¾Ğ²Ğ°Ğ½Ñ– Ğ±Ñ–Ğ±Ğ»Ñ–Ğ¾Ñ‚ĞµĞºĞ¸

| Ğ‘Ñ–Ğ±Ğ»Ñ–Ğ¾Ñ‚ĞµĞºĞ° | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ |
|------------|-------------|
| `@tanstack/react-query` | Server state |
| `zustand` / `jotai` | Client state |
| `react-hook-form` | Forms |
| `zod` | Validation |
| `tailwindcss` | Styling |
