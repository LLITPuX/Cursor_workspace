---
description: Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸ Python Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±ĞºĞ¸. ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ Ğ¿Ñ€Ğ¸ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ñ– Ğ· .py Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸.
globs: ["**/*.py"]
alwaysApply: false
---

# ğŸ Python â€” Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸ Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±ĞºĞ¸

## ğŸ“‹ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ– Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°

### Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ (PEP8)
- **Ğ’Ñ–Ğ´ÑÑ‚ÑƒĞ¿Ğ¸:** 4 Ğ¿Ñ€Ğ¾Ğ±Ñ–Ğ»Ğ¸ (Ğ½Ğµ Ñ‚Ğ°Ğ±Ğ¸)
- **Ğ”Ğ¾Ğ²Ğ¶Ğ¸Ğ½Ğ° Ñ€ÑĞ´ĞºĞ°:** Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 88 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ–Ğ² (black ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚)
- **Ğ†Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸:** Ğ·Ğ³Ñ€ÑƒĞ¿Ğ¾Ğ²Ğ°Ğ½Ñ– (stdlib â†’ third-party â†’ local)
- **ĞŸÑ€Ğ¾Ğ±Ñ–Ğ»Ğ¸:** Ğ½Ğ°Ğ²ĞºĞ¾Ğ»Ğ¾ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ–Ğ², Ğ¿Ñ–ÑĞ»Ñ ĞºĞ¾Ğ¼Ğ¸

### Ğ†Ğ¼ĞµĞ½ÑƒĞ²Ğ°Ğ½Ğ½Ñ
```python
# Ğ—Ğ¼Ñ–Ğ½Ğ½Ñ– Ñ‚Ğ° Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ— â€” snake_case
user_name = "John"
def get_user_data():
    pass

# ĞšĞ»Ğ°ÑĞ¸ â€” PascalCase
class UserService:
    pass

# ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ğ¸ â€” UPPER_SNAKE_CASE
MAX_RETRIES = 3
API_BASE_URL = "https://..."

# ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ– â€” Ğ· underscore
_internal_cache = {}
def _helper_function():
    pass
```

## ğŸ”’ Type Hints (Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¾)

```python
from typing import Optional, List, Dict, Any, Union

def fetch_user(user_id: int) -> Optional[Dict[str, Any]]:
    """Fetch user by ID."""
    pass

def process_items(items: List[str]) -> Dict[str, int]:
    """Process list of items."""
    return {}

# Ğ”Ğ»Ñ ÑĞºĞ»Ğ°Ğ´Ğ½Ğ¸Ñ… Ñ‚Ğ¸Ğ¿Ñ–Ğ² â€” Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ¹ TypeAlias
UserData = Dict[str, Any]
UserList = List[UserData]
```

## âš¡ Async/Await (Ğ´Ğ»Ñ I/O Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ğ¹)

```python
import asyncio
import aiohttp

# âœ… ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ â€” async Ğ´Ğ»Ñ I/O
async def fetch_data(url: str) -> dict:
    async with aiohttp.ClientSession() as session:
        async with session.get(url) as response:
            return await response.json()

# âŒ ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ â€” ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¸Ğ¹ I/O Ğ² async ĞºĞ¾Ğ´Ñ–
# import requests
# def fetch_data(url):
#     return requests.get(url).json()
```

## ğŸ“ Docstrings (Ğ´Ğ»Ñ Ğ¿ÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¸Ñ… Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¹)

```python
def calculate_total(
    items: List[dict],
    tax_rate: float = 0.2
) -> float:
    """
    Calculate total price with tax.
    
    Args:
        items: List of items with 'price' key.
        tax_rate: Tax rate as decimal (default 0.2 = 20%).
        
    Returns:
        Total price including tax.
        
    Raises:
        ValueError: If items list is empty.
        
    Example:
        >>> items = [{"price": 100}, {"price": 50}]
        >>> calculate_total(items, 0.1)
        165.0
    """
    if not items:
        raise ValueError("Items list cannot be empty")
    
    subtotal = sum(item["price"] for item in items)
    return subtotal * (1 + tax_rate)
```

## ğŸš« Ğ—Ğ°Ğ±Ğ¾Ñ€Ğ¾Ğ½ĞµĞ½Ğ¾

```python
# âŒ Wildcard imports
from module import *

# âŒ Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ½Ñ– (Ğ±ĞµĞ· ĞºÑ€Ğ°Ğ¹Ğ½ÑŒĞ¾Ñ— Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸)
global_state = {}

# âŒ Bare except
try:
    risky_operation()
except:  # âŒ ĞÑ–ĞºĞ¾Ğ»Ğ¸ Ñ‚Ğ°Ğº
    pass

# âœ… ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾
try:
    risky_operation()
except ValueError as e:
    logger.error(f"Value error: {e}")
except Exception as e:
    logger.exception("Unexpected error")
    raise
```

## ğŸ“¦ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

```
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py           # Entry point
â”‚   â”œâ”€â”€ config.py         # Configuration
â”‚   â”œâ”€â”€ models/           # Data models
â”‚   â”œâ”€â”€ services/         # Business logic
â”‚   â”œâ”€â”€ repositories/     # Data access
â”‚   â””â”€â”€ utils/            # Helpers
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py       # Fixtures
â”‚   â””â”€â”€ test_*.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ requirements-dev.txt
â””â”€â”€ pyproject.toml
```

## ğŸ”§ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ¾Ğ²Ğ°Ğ½Ñ– Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¸

| Ğ†Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ |
|------------|-------------|
| `black` | Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ ĞºĞ¾Ğ´Ñƒ |
| `ruff` | Ğ›Ñ–Ğ½Ñ‚ĞµÑ€ (ÑˆĞ²Ğ¸Ğ´ĞºĞ¸Ğ¹) |
| `mypy` | ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ñ‚Ğ¸Ğ¿Ñ–Ğ² |
| `pytest` | Ğ¢ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ |
| `poetry` / `uv` | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹ |
