# –î–æ—Ä–æ–∂–Ω—è –∫–∞—Ä—Ç–∞: –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ FalkorDB —Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è QPE

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** 20 —Å—ñ—á–Ω—è 2026  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 21 —Å—ñ—á–Ω—è 2026  
**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è  
**–í–µ—Ä—Å—ñ—è:** 2.0 (—Ä–æ–∑—à–∏—Ä–µ–Ω–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ Gemini_chat/2201.md)

---

## üéØ –ú–µ—Ç–∞ –ø—Ä–æ–µ–∫—Ç—É

–°—Ç–≤–æ—Ä–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—É —Å–∏—Å—Ç–µ–º—É –ø–∞–º'—è—Ç—ñ –Ω–∞ –±–∞–∑—ñ FalkorDB –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é –æ–±—Ä–æ–±–∫–æ—é –∑–∞–ø–∏—Ç—ñ–≤ —á–µ—Ä–µ–∑ Query Processing Engine (QPE) –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è –∞–≥–µ–Ω—Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –µ—Ç–∞–ø—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–æ—Ä–∫—Å–ø–µ–π—Å—É.

**–ö–ª—é—á–æ–≤–∏–π –ø—Ä–∏–Ω—Ü–∏–ø:** –°–ø–æ—á–∞—Ç–∫—É —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä—è–º–∏–π –ø–∞–π–ø–ª–∞–π–Ω `/db` ‚Üí `/ss` –¥–ª—è –Ω–æ–≤–∏—Ö —Å–µ—Å—ñ–π, –º—ñ–≥—Ä–∞—Ü—ñ—é —Å—Ç–∞—Ä–∏—Ö —Å–µ—Å—ñ–π –≤–∏–∫–æ–Ω–∞—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ.

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è (–Ω–∞ –æ—Å–Ω–æ–≤—ñ Gemini_chat/2201.md)

–°–∏—Å—Ç–µ–º–∞ –ø–∞–º'—è—Ç—ñ –±—É–¥—É—î—Ç—å—Å—è –Ω–∞ **4 –±–ª–æ–∫–∞—Ö**, —è–∫—ñ —Ñ–æ—Ä–º—É—é—Ç—å —Å–∞–º–æ–±—É—á–∞—é—á—É—Å—è –µ–∫–æ—Å–∏—Å—Ç–µ–º—É:

### –ë–ª–æ–∫ 1: –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è (The Backbone)
**–ú–µ—Ç–∞:** –ù–µ–∑–º—ñ–Ω–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—ñ–≤ —è–∫ "–°–≤—è—â–µ–Ω–Ω–∏–π –ì—Ä–∞–∞–ª—å" –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—É–¥—å-—è–∫–æ–≥–æ —Ä–æ–∑–º–æ–≤–∏.

**–ö–ª—é—á–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏:**
- `Session` ‚Üí `Message` (–∑–≤'—è–∑–æ–∫ —á–µ—Ä–µ–∑ `[:NEXT]` —Å—Ç–≤–æ—Ä—é—î linked list)
- –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è `Agent` / `User` / `Tool` –¥–ª—è —Å–∞–º–æ—Å–≤—ñ–¥–æ–º–æ—Å—Ç—ñ –∞–≥–µ–Ω—Ç–∞
- `Rule` —Ç–∞ `Preference` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ê–≥–µ–Ω—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—É–º—ñ—Ç–∏: "–Ø –≤–∏—Ä—ñ—à–∏–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç, –∞–ª–µ —Å–∫—Ä–∏–ø—Ç ‚Äî —Ü–µ –Ω–µ —è".

### –ë–ª–æ–∫ 2: –ú–æ–∑–æ–∫ (Context & Learning)
**–ú–µ—Ç–∞:** –°—É—Ç–Ω–æ—Å—Ç—ñ —è–∫ "—Å–∏–Ω–∞–ø—Å–∏" –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è, –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞ –º—ñ—Ä–∫—É–≤–∞–Ω—å.

**–ö–ª—é—á–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏:**
- `Entity` –∑ **weighted edges** (`[:MENTIONS {weight}]`) ‚Äî –¥–æ–∑–≤–æ–ª—è—î —Ñ–æ–Ω–æ–≤–æ–º—É —Å–∫—Ä–∏–ø—Ç—É –Ω–∞–≤—á–∞—Ç–∏—Å—è
- `ContextFrame` ‚Äî –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π –ø—Ä–æ–º–ø—Ç, —è–∫–∏–π –æ—Ç—Ä–∏–º–∞–≤ –∞–≥–µ–Ω—Ç (–¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ)
- `Thought` ‚Äî –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –∞–Ω–∞–ª—ñ–∑ –∞–≥–µ–Ω—Ç–∞ (Planning, Criticism, Decision)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –í–∞–≥–∏ –ø—ñ–¥–≤–∏—â—É—é—Ç—å—Å—è/–∑–Ω–∏–∂—É—é—Ç—å—Å—è, –∞–ª–µ –∑–≤'—è–∑–∫–∏ –ù–ï –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è (Append-Only).

### –ë–ª–æ–∫ 3: –†—É–∫–∏ (Tools & Execution)
**–ú–µ—Ç–∞:** –†–æ–∑—É–º—ñ–Ω–Ω—è —Ñ—ñ–∑–∏—á–Ω–æ–≥–æ —Å–≤—ñ—Ç—É –∫–æ–¥—É —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤.

**–ö–ª—é—á–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏:**
- `Scope` (System vs UserProject) ‚Äî —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è "—Å–≤–æ—ó—Ö" —Ç–∞ "—á—É–∂–∏—Ö" —Ñ–∞–π–ª—ñ–≤
- `Tool` ‚Äî —Ä–µ—î—Å—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
- `Execution` ‚Äî –ø–æ–≤–Ω—ñ –ª–æ–≥–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (stdout, stderr) –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø–æ–º–∏–ª–æ–∫
- `Error` ‚Äî —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–∞–≤—á–∞–Ω–Ω—è

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ê–≥–µ–Ω—Ç –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –ø–ª—É—Ç–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–µ–∫—Ç—É –∑—ñ —Å–∫—Ä–∏–ø—Ç–æ–º —Å–≤–æ—î—ó –ø–∞–º'—è—Ç—ñ.

### –ë–ª–æ–∫ 4: –ü—Ä–æ–º–ø—Ç (Retrieval & Prompt Construction)
**–ú–µ—Ç–∞:** –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π Markdown-–¥–æ–∫—É–º–µ–Ω—Ç (–¥–æ 50k —Ç–æ–∫–µ–Ω—ñ–≤) –¥–ª—è –∞–≥–µ–Ω—Ç–∞.

**–ö–ª—é—á–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏:**
- `Protocol` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π (trigger_keywords –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏—è–≤–ª–µ–Ω–Ω—è)
- `Instruction` ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è (order –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç—É: Role ‚Üí Tools ‚Üí Context ‚Üí Protocols

**–ü—Ä–∏–Ω—Ü–∏–ø:** –û–¥–∏–Ω –∑–∞–ø–∏—Ç = –æ–¥–∏–Ω –Ω–æ–≤–∏–π —á–∞—Ç (stateless), –∞–ª–µ –∑ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

### –°—Ç—Ä–∞—Ç–µ–≥—ñ—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:
- **–§–∞–∑–∞ 1:** –ë–∞–∑–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (–º—ñ–Ω—ñ–º—É–º –¥–ª—è —Ä–æ–±–æ—Ç–∏)
- **–§–∞–∑–∞ 2:** –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ (weighted edges, ContextFrame, Thought)
- **–§–∞–∑–∞ 3:** –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è (Scope, Protocol, Rule) ‚Äî –º–∞–π–±—É—Ç–Ω—î

---

## üîÑ –ü–∞–π–ø–ª–∞–π–Ω —Ä–æ–±–æ—Ç–∏

### –ö–æ–º–∞–Ω–¥–∞ `/db [–∑–∞–ø–∏—Ç]`
1. –ê–≥–µ–Ω—Ç –æ—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
2. –ê–≥–µ–Ω—Ç –≤–∏–∫–ª–∏–∫–∞—î QPE Service `/api/v1/qpe/process-query`
3. QPE –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç:
   - –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è (DeBERTa): Sentiment, Intent, Complexity
   - –í–∏–ª—É—á–µ–Ω–Ω—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π (GLINER): –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ —Ç–∏–ø—ñ–≤
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è embeddings (EmbGEMMA)
4. QPE –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
5. –ê–≥–µ–Ω—Ç —Ñ–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

### –ö–æ–º–∞–Ω–¥–∞ `/ss`
1. –ê–≥–µ–Ω—Ç —Ñ–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
2. –ê–≥–µ–Ω—Ç —Å—Ç–≤–æ—Ä—é—î `.md` —Ñ–∞–π–ª —É `saved_sessions/` (—Ç–∏–º—á–∞—Å–æ–≤–∏–π –∫–æ—Å—Ç–∏–ª—å)
3. –ê–≥–µ–Ω—Ç –≤–∏–∫–ª–∏–∫–∞—î —Å–∫—Ä–∏–ø—Ç `save_to_falkordb.py` –∑ —à–ª—è—Ö–æ–º –¥–æ —Ñ–∞–π–ª—É
4. –°–∫—Ä–∏–ø—Ç –ø–∞—Ä—Å–∏—Ç—å `.md` —Ñ–∞–π–ª:
   - –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: –≤–∏–∫–ª–∏–∫–∞—î QPE `/process-query`
   - –î–ª—è –∫–æ–∂–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞: –≤–∏–∫–ª–∏–∫–∞—î QPE `/process-assistant-response`
5. –°–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä—é—î –≤—É–∑–ª–∏ —Ç–∞ –∑–≤'—è–∑–∫–∏ –≤ FalkorDB
6. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

---

## üìã –ï—Ç–∞–ø–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ï—Ç–∞–ø 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ FalkorDB
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 1-2 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –í–∏—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

#### –ó–∞–¥–∞—á—ñ:
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑ FalkorDB
- [x] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ persistence —á–µ—Ä–µ–∑ Docker volumes
- [x] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –∫–ª—ñ—î–Ω—Ç `falkordb` (Python)
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞–∑–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≥—Ä–∞—Ñ—É (–º–∞–ø–ø—ñ–Ω–≥ –∑ –ø–æ—Ç–æ—á–Ω–æ—ó PostgreSQL —Å—Ö–µ–º–∏)
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—é —Ç–∞ –±–∞–∑–æ–≤–∏–º –æ–ø–µ—Ä–∞—Ü—ñ—è–º

#### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `falkordb-service/docker-compose.yml` - Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- `falkordb-service/requirements.txt` - Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- `falkordb-service/scripts/test_connection.py` - –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- `falkordb-service/scripts/init_graph.py` - –°–∫—Ä–∏–ø—Ç —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≥—Ä–∞—Ñ—É
- `falkordb-service/README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ü—Ä–∞—Ü—é—é—á–∏–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ FalkorDB
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ Python –∫–ª—ñ—î–Ω—Ç `from falkordb import FalkorDB`
- –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥—Ä–∞—Ñ—É (Session, Message, AnalysisNode, ResponseNode, QuestionsNode, Classification, Entity, EntityType)

#### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:
```python
# –ü—Ä–∏–∫–ª–∞–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
from falkordb import FalkorDB

client = FalkorDB(host="localhost", port=6379, password="your-password")
graph = client.select_graph('agent_memory')
```

---

### –ï—Ç–∞–ø 2: QPE Service - –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 2-3 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –í–∏—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

#### –ó–∞–¥–∞—á—ñ:
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è QPE Service
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞–∑–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Ä–≤—ñ—Å—É (FastAPI)
- [x] Endpoint `/api/v1/qpe/process-query`:
  - –ü—Ä–∏–π–º–∞—î: `{"query": "—Ç–µ–∫—Å—Ç –∑–∞–ø–∏—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞"}`
  - –ü–æ–≤–µ—Ä—Ç–∞—î: —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π JSON –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—Ä–æ–±–∫–∏
- [x] Endpoint `/api/v1/qpe/process-assistant-response`:
  - –ü—Ä–∏–π–º–∞—î: `{"response": "—Ç–µ–∫—Å—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞", "structure": {"analysis": "...", "response": "...", "questions": "..."}}`
  - –ü–æ–≤–µ—Ä—Ç–∞—î: —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π JSON –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—Ä–æ–±–∫–∏
- [x] –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- [x] Health check endpoint `/api/v1/qpe/health`

#### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `falkordb-service/docker-compose.yml` - –æ–Ω–æ–≤–ª–µ–Ω–æ (–¥–æ–¥–∞–Ω–æ —Å–µ—Ä–≤—ñ—Å–∏ `ollama` —Ç–∞ `qpe-service`)
- `falkordb-service/Dockerfile` - Docker –æ–±—Ä–∞–∑ –¥–ª—è QPE Service
- `falkordb-service/app/main.py` - FastAPI –¥–æ–¥–∞—Ç–æ–∫
- `falkordb-service/app/config.py` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É
- `falkordb-service/app/embedding.py` - —Å–µ—Ä–≤—ñ—Å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó embeddings —á–µ—Ä–µ–∑ Ollama
- `falkordb-service/app/api/routes.py` - QPE endpoints
- `falkordb-service/app/models/request.py` - Pydantic –º–æ–¥–µ–ª—ñ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤
- `falkordb-service/app/models/response.py` - Pydantic –º–æ–¥–µ–ª—ñ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- `falkordb-service/requirements.txt` - –æ–Ω–æ–≤–ª–µ–Ω–æ (FastAPI, uvicorn, httpx, pydantic, falkordb)
- `falkordb-service/README.md` - –æ–Ω–æ–≤–ª–µ–Ω–æ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é QPE Service

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ QPE Service –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –≤ Docker (–ø–æ—Ä—Ç 8001)
- ‚úÖ –¢—Ä–∏ —Å–µ—Ä–≤—ñ—Å–∏ –ø—Ä–∞—Ü—é—é—Ç—å: FalkorDB, Ollama, QPE Service
- ‚úÖ –î–≤–∞ endpoints –≥–æ—Ç–æ–≤—ñ –¥–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:
  - `POST /api/v1/qpe/process-query` - –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - `POST /api/v1/qpe/process-assistant-response` - –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞
- ‚úÖ Health check endpoint `/api/v1/qpe/health` –ø—Ä–∞—Ü—é—î
- ‚úÖ –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö –≤–∏–∑–Ω–∞—á–µ–Ω–∞ (Pydantic –º–æ–¥–µ–ª—ñ)
- ‚úÖ Embeddings –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ Ollama (–º–æ–¥–µ–ª—å `embeddinggemma:latest`)
- ‚úÖ Mock-—Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –≤–∏–ª—É—á–µ–Ω–Ω—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π (–±—É–¥—É—Ç—å –∑–∞–º—ñ–Ω–µ–Ω—ñ –≤ –ï—Ç–∞–ø–∞—Ö 3-4)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π QPE:

**–î–ª—è –∑–∞–ø–∏—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`/process-query`):**
```json
{
  "query": "–æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç",
  "classifications": {
    "sentiment": "neutral|positive_feedback|negative_feedback|frustrated",
    "intents": ["information_seeking", "task_execution", ...],
    "complexity": "simple_question|structured_prompt|architectural|requires_clarification"
  },
  "entities": [
    {"text": "FalkorDB", "type": "Technology", "start": 0, "end": 8},
    {"text": "QPE", "type": "Component", "start": 15, "end": 18}
  ],
  "embedding": [0.123, 0.456, ...]
}
```

**–î–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞ (`/process-assistant-response`):**
```json
{
  "response": "–æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å",
  "structure": {
    "analysis": "—Ç–µ–∫—Å—Ç –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ –¥—ñ–π",
    "response": "–æ—Å–Ω–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å",
    "questions": "–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)"
  },
  "response_type": "explanation|code_proposal|analysis|question",
  "complexity": "simple|detailed|architectural",
  "analysis_entities": [
    {"text": "read_file", "type": "Tool", "start": 0, "end": 8},
    {"text": "ROADMAP.md", "type": "File", "start": 15, "end": 25}
  ],
  "response_entities": [
    {"text": "FalkorDB", "type": "Technology", "start": 0, "end": 8},
    {"text": "–≥—Ä–∞—Ñ–æ–≤–∞ –±–∞–∑–∞", "type": "Concept", "start": 20, "end": 32}
  ],
  "embeddings": {
    "analysis": [0.123, ...],
    "response": [0.456, ...],
    "questions": [0.789, ...] // —è–∫—â–æ —î
  }
}
```

---

### –ï—Ç–∞–ø 3: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è DeBERTa v3 –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 3-4 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –í–∏—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

#### –ó–∞–¥–∞—á—ñ:
- [x] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `transformers` —Ç–∞ `torch`
- [x] –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ DeBERTa v3 –º–æ–¥–µ–ª—å (`cross-encoder/nli-deberta-v3-base`) ‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:** –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω—É –º–æ–¥–µ–ª—å
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç—Ä–∏ –æ–∫—Ä–µ–º—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏:
  - `SentimentClassifier` (4 –∫–ª–∞—Å–∏: `neutral`, `positive_feedback`, `negative_feedback`, `frustrated`)
  - `IntentClassifier` (6 –∫–ª–∞—Å—ñ–≤, multi-label: `information_seeking`, `capability_inquiry`, `task_execution`, `project_discussion`, `error_resolution`, `clarification_needed`)
  - `ComplexityClassifier` (4 –∫–ª–∞—Å–∏: `simple_question`, `structured_prompt`, `architectural`, `requires_clarification`)
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞:
  - `ResponseTypeClassifier` (4 –∫–ª–∞—Å–∏: `explanation`, `code_proposal`, `analysis`, `question`)
  - `ResponseComplexityClassifier` (3 –∫–ª–∞—Å–∏: `simple`, `detailed`, `architectural`)
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ zero-shot –ø—ñ–¥—Ö—ñ–¥ (–±–µ–∑ fine-tuning –Ω–∞ –ø–æ—á–∞—Ç–∫—É)
- [x] –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –≤ QPE Service
- [x] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

#### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `falkordb-service/app/classification.py` - –º–æ–¥—É–ª—å –∑ —É—Å—ñ–º–∞ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞–º–∏
- `falkordb-service/requirements.txt` - –æ–Ω–æ–≤–ª–µ–Ω–æ (–¥–æ–¥–∞–Ω–æ transformers, torch, accelerate, sentencepiece, **protobuf>=3.20.0** ‚úÖ)
- `falkordb-service/Dockerfile` - –æ–Ω–æ–≤–ª–µ–Ω–æ (–¥–æ–¥–∞–Ω–æ —Å–∏—Å—Ç–µ–º–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è torch)
- `falkordb-service/docker-compose.yml` - –æ–Ω–æ–≤–ª–µ–Ω–æ (–∑–±—ñ–ª—å—à–µ–Ω–æ start_period –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π)
- `falkordb-service/app/api/routes.py` - –æ–Ω–æ–≤–ª–µ–Ω–æ (–∑–∞–º—ñ–Ω–µ–Ω–æ mock-—Ñ—É–Ω–∫—Ü—ñ—ó –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏)

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ü'—è—Ç—å –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ –ø—Ä–∞—Ü—é—é—Ç—å (—Ç—Ä–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤, –¥–≤–∞ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π)
- ‚úÖ Zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ `cross-encoder/nli-deberta-v3-base` pipeline ‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞ zero-shot –º–æ–¥–µ–ª—å
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –≤ QPE endpoints (`/process-query` —Ç–∞ `/process-assistant-response`)
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ fallback –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- ‚úÖ Lazy loading –º–æ–¥–µ–ª–µ–π (singleton pattern)
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ GPU (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ transformers)
- ‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–¥–∞–Ω–æ `protobuf>=3.20.0` –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ transformers

#### –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ (20 —Å—ñ—á–Ω—è 2026):
1. ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –î–æ–¥–∞–Ω–æ `protobuf>=3.20.0` –¥–æ requirements.txt - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤
2. ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –ó–º—ñ–Ω–µ–Ω–æ –º–æ–¥–µ–ª—å –∑ `microsoft/deberta-v3-base` –Ω–∞ `cross-encoder/nli-deberta-v3-base` - —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞ zero-shot —Å—É–º—ñ—Å–Ω–∞ –º–æ–¥–µ–ª—å
3. ‚úÖ –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ —É—Å–ø—ñ—à–Ω—É —Ä–æ–±–æ—Ç—É: –≤—Å—ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —Ç–∞ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö: API –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

#### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:
```python
# –ü—Ä–∏–∫–ª–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤
class SentimentClassifier:
    def classify(self, text: str) -> str:
        # Zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è
        pass

class IntentClassifier:
    def classify(self, text: str) -> List[str]:
        # Multi-label –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è
        pass
```

---

### –ï—Ç–∞–ø 4: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è GLINER v2.1 –¥–ª—è –≤–∏–ª—É—á–µ–Ω–Ω—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 2-3 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –í–∏—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

#### –ó–∞–¥–∞—á—ñ:
- [x] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ GLINER v2.1
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ —Ç–∏–ø—ñ–≤ —Å—É—Ç–Ω–æ—Å—Ç–µ–π –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
  ```python
  QUERY_ENTITY_TYPES = [
      "Technology", "Framework", "Library", "Database", "Language",
      "Project", "Component", "Service", "API", "Endpoint",
      "Task", "Feature", "Bug", "Requirement",
      "Concept", "Pattern", "Architecture", "Design",
      "Person", "Role", "Team",
      "File", "Directory", "Config", "Script",
      "Preference", "Constraint", "Decision"
  ]
  ```
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ —Ç–∏–ø—ñ–≤ —Å—É—Ç–Ω–æ—Å—Ç–µ–π –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞:
  ```python
  RESPONSE_ENTITY_TYPES = QUERY_ENTITY_TYPES + [
      "Tool",           # read_file, codebase_search, —Ç–æ—â–æ
      "CodeBlock",      # –±–ª–æ–∫–∏ –∫–æ–¥—É
      "Recommendation", # —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
      "Action",         # –≤–∏–∫–æ–Ω–∞–Ω—ñ –¥—ñ—ó
      "Analysis",       # –∞–Ω–∞–ª—ñ–∑ —Å–∏—Ç—É–∞—Ü—ñ—ó
      "Question"       # –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–Ω—è
  ]
  ```
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `EntityExtractor` –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º GLINER:
  - –î–ª—è –∑–∞–ø–∏—Ç—ñ–≤: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `QUERY_ENTITY_TYPES`
  - –î–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `RESPONSE_ENTITY_TYPES`
- [x] –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ extractor –≤ QPE Service
- [x] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ GLINER –≤–∏—Ç—è–≥—É—î —Å—É—Ç–Ω–æ—Å—Ç—ñ –∑ –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- ‚úÖ –†—ñ–∑–Ω—ñ —Ç–∏–ø–∏ —Å—É—Ç–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ —Ç–µ–∫—Å—Ç—ñ–≤
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –≤ QPE endpoints

#### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `falkordb-service/app/entity_extraction.py` - –º–æ–¥—É–ª—å –≤–∏–ª—É—á–µ–Ω–Ω—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π (133 —Ä—è–¥–∫–∏)
- `falkordb-service/requirements.txt` - –¥–æ–¥–∞–Ω–æ `gliner>=0.2.0`

#### –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `falkordb-service/app/api/routes.py` - —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ EntityExtractor –≤ –æ–±–∏–¥–≤–∞ endpoints

#### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –º–æ–¥–µ–ª—å `urchade/gliner_medium-v2.1`
- Singleton pattern –¥–ª—è lazy loading extractor'—ñ–≤
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ fallback –Ω–∞ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä extractor'–∞ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

#### –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ (21 —Å—ñ—á–Ω—è 2026):
1. ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è extractor'–∞ –≤ `routes.py` - —Ç–µ–ø–µ—Ä –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `get_response_extractor()`
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö: API –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–ª—É—á–µ–Ω–Ω—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π
3. ‚úÖ –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ —É—Å–ø—ñ—à–Ω—É —Ä–æ–±–æ—Ç—É: –≤—Å—ñ endpoints –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ

---

### –ï—Ç–∞–ø 5: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è EmbGEMMA –¥–ª—è embeddings
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 1-2 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –°–µ—Ä–µ–¥–Ω—ñ–π  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

#### –ó–∞–¥–∞—á—ñ:
- [x] –í–∏—Ä—ñ—à–∏—Ç–∏: Ollama —á–∏ Hugging Face –Ω–∞–ø—Ä—è–º—É?
  - ‚úÖ –í–∏—Ä—ñ—à–µ–Ω–æ: Ollama (—è–∫ —É –ø–æ—Ç–æ—á–Ω–æ–º—É embedding-service)
- [x] –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é embeddings –≤ QPE Service:
  - ‚úÖ –î–ª—è –∑–∞–ø–∏—Ç—ñ–≤: –æ–¥–∏–Ω embedding
  - ‚úÖ –î–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: –æ–∫—Ä–µ–º—ñ embeddings –¥–ª—è analysis, response, questions
- [x] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Ollama
- [x] –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ batch-–æ–±—Ä–æ–±–∫—É —á–µ—Ä–µ–∑ asyncio.gather
- [x] –ü–æ–∫—Ä–∞—â–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ä–æ–∑–º—ñ—Ä–Ω–æ—Å—Ç—ñ embeddings
- [x] –ü–æ–∫—Ä–∞—â–∏—Ç–∏ health check (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ)
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ embeddings
- [x] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó embeddings

#### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `falkordb-service/app/embedding.py` - –º–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó embeddings (–æ–Ω–æ–≤–ª–µ–Ω–æ)
- `falkordb-service/scripts/test_embeddings.py` - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ embeddings

#### –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `falkordb-service/app/embedding.py` - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ batch-–æ–±—Ä–æ–±–∫—É, –ø–æ–∫—Ä–∞—â–µ–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ç–∞ health check

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ Embeddings –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- ‚úÖ –î–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –æ–∫—Ä–µ–º—ñ embeddings –¥–ª—è –∫–æ–∂–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏
- ‚úÖ Batch-–æ–±—Ä–æ–±–∫–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ asyncio.gather (–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ä–æ–∑–º—ñ—Ä–Ω–æ—Å—Ç—ñ: –±–ª–æ–∫—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–∏ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ
- ‚úÖ Health check –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ —Ç–∞ —Ç–µ—Å—Ç—É—î –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –∑ –ø–æ–≤–Ω–∏–º –Ω–∞–±–æ—Ä–æ–º —Ç–µ—Å—Ç—ñ–≤
- ‚úÖ –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ

#### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –º–æ–¥–µ–ª—å `embeddinggemma:latest` —á–µ—Ä–µ–∑ Ollama API
- –†–æ–∑–º—ñ—Ä–Ω—ñ—Å—Ç—å embeddings: 768
- Batch-–æ–±—Ä–æ–±–∫–∞: –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ —á–µ—Ä–µ–∑ `asyncio.gather`
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è: –±–ª–æ–∫—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–∏ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ —Ä–æ–∑–º—ñ—Ä–Ω–æ—Å—Ç—ñ
- Health check: –ø–µ—Ä–µ–≤—ñ—Ä—è—î –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å Ollama, –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ —Ç–∞ —Ç–µ—Å—Ç—É—î –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é

#### –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ/–ø–æ–∫—Ä–∞—â–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ (21 —Å—ñ—á–Ω—è 2026):
1. ‚úÖ **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ:** Batch-–æ–±—Ä–æ–±–∫–∞ —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `asyncio.gather` –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏
2. ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–æ:** –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ä–æ–∑–º—ñ—Ä–Ω–æ—Å—Ç—ñ —Ç–µ–ø–µ—Ä –±–ª–æ–∫—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–º—ñ—Å—Ç—å –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
3. ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–æ:** Health check —Ç–µ–ø–µ—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ —Ç–∞ —Ç–µ—Å—Ç—É—î –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é
4. ‚úÖ **–î–æ–¥–∞–Ω–æ:** –¢–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ embeddings
5. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ:** –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ (5/5)

---

### –ï—Ç–∞–ø 6: –°–∫—Ä–∏–ø—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ FalkorDB
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 3-4 –¥–Ω—ñ (—Ä–æ–∑—à–∏—Ä–µ–Ω–æ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –Ω–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏)  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –í–∏—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–æ–∑–ø–æ—á–∞—Ç–æ

#### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ (–Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞ Gemini_chat/2201.md):
–°–∏—Å—Ç–µ–º–∞ –ø–∞–º'—è—Ç—ñ –±—É–¥—É—î—Ç—å—Å—è –Ω–∞ 4 –±–ª–æ–∫–∞—Ö:
- **–ë–ª–æ–∫ 1 (–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è):** –ù–µ–∑–º—ñ–Ω–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—ñ–≤ –∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º Agent/User/Tool
- **–ë–ª–æ–∫ 2 (–ú–æ–∑–æ–∫):** –°—É—Ç–Ω–æ—Å—Ç—ñ –∑ weighted edges, ContextFrame, Thought –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è
- **–ë–ª–æ–∫ 3 (–†—É–∫–∏):** –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∑ Scope (System vs UserProject), Execution –∑ –ø–æ–≤–Ω–∏–º–∏ –ª–æ–≥–∞–º–∏
- **–ë–ª–æ–∫ 4 (–ü—Ä–æ–º–ø—Ç):** Protocol —è–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Instruction, Markdown –ø—Ä–æ–º–ø—Ç –¥–æ 50k —Ç–æ–∫–µ–Ω—ñ–≤

#### –ó–∞–¥–∞—á—ñ (–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è):
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç `save_to_falkordb.py`:
  - –ü—Ä–∏–π–º–∞—î —à–ª—è—Ö –¥–æ `.md` —Ñ–∞–π–ª—É —Å–µ—Å—ñ—ó
  - –ü–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Å—ñ—ó (–∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ + –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞)
  - –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
    - –í–∏–∫–ª–∏–∫–∞—î QPE `/api/v1/qpe/process-query`
    - –°—Ç–≤–æ—Ä—é—î –≤—É–∑–æ–ª `Message` (role: 'user')
    - –°—Ç–≤–æ—Ä—é—î –≤—É–∑–æ–ª `Classification` –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
    - –°—Ç–≤–æ—Ä—é—î –≤—É–∑–ª–∏ `Entity` —Ç–∞ `EntityType`
    - –°—Ç–≤–æ—Ä—é—î –∑–≤'—è–∑–∫–∏ –º—ñ–∂ –≤—É–∑–ª–∞–º–∏
  - –î–ª—è –∫–æ–∂–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞:
    - –í–∏–∫–ª–∏–∫–∞—î QPE `/api/v1/qpe/process-assistant-response`
    - –°—Ç–≤–æ—Ä—é—î –≤—É–∑–æ–ª `Message` (role: 'assistant')
    - –°—Ç–≤–æ—Ä—é—î –≤—É–∑–ª–∏ `AnalysisNode`, `ResponseNode`, `QuestionsNode` (—è–∫—â–æ —î)
    - –°—Ç–≤–æ—Ä—é—î –≤—É–∑–ª–∏ `Classification` –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    - –°—Ç–≤–æ—Ä—é—î –≤—É–∑–ª–∏ `Entity` –¥–ª—è –∫–æ–∂–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏
    - –°—Ç–≤–æ—Ä—é—î –∑–≤'—è–∑–∫–∏ –º—ñ–∂ –≤—É–∑–ª–∞–º–∏

#### –ó–∞–¥–∞—á—ñ (–§–∞–∑–∞ 2: –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏):
- [ ] –î–æ–¥–∞—Ç–∏ –±–∞–∑–æ–≤—ñ –≤—É–∑–ª–∏ —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—ñ:
  - –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—É–∑–æ–ª `Agent` (name: "Cursor AI", version: "System 1.0")
  - –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—É–∑–æ–ª `User` (id, name)
  - –ó–≤'—è–∑–∫–∏: `(User)-[:AUTHORED]->(Message:user)`, `(Agent)-[:AUTHORED]->(Message:assistant)`
- [ ] –î–æ–¥–∞—Ç–∏ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–Ω—ñ –∑–≤'—è–∑–∫–∏:
  - `(Message)-[:NEXT]->(Message)` - —Å—Ç–≤–æ—Ä—é—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
  - `(Message)-[:REPLY_TO]->(Message)` - —è–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- [ ] –î–æ–¥–∞—Ç–∏ weighted edges –¥–ª—è Entity:
  - –ó–∞–º—ñ—Å—Ç—å `[:HAS_ENTITY]` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `[:MENTIONS {weight: 1.0, created_at: timestamp}]`
  - –í–∞–≥–∞ –¥–æ–∑–≤–æ–ª—è—î —Ñ–æ–Ω–æ–≤–æ–º—É —Å–∫—Ä–∏–ø—Ç—É –ø—ñ–¥–≤–∏—â—É–≤–∞—Ç–∏/–∑–Ω–∏–∂—É–≤–∞—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—å
  - **–í–∞–∂–ª–∏–≤–æ:** –ó–≤'—è–∑–∫–∏ –ù–ï –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è (Append-Only –ø—Ä–∏–Ω—Ü–∏–ø), —Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω—é—é—Ç—å –≤–∞–≥—É
- [ ] –î–æ–¥–∞—Ç–∏ ContextFrame —Ç–∞ Thought (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω—ñ –¥–∞–Ω—ñ):
  - `ContextFrame` - –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π –ø—Ä–æ–º–ø—Ç, —è–∫–∏–π –æ—Ç—Ä–∏–º–∞–≤ –∞–≥–µ–Ω—Ç
  - `Thought` - –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –∞–Ω–∞–ª—ñ–∑ –∞–≥–µ–Ω—Ç–∞ (reasoning_type: 'Planning' | 'Criticism' | 'Decision')
  - –ó–≤'—è–∑–∫–∏: `(Message:Inbound)-[:TRIGGERED]->(ContextFrame)`, `(ContextFrame)-[:LED_TO]->(Thought)`, `(Thought)-[:RESULTED_IN]->(Message:Outbound)`
- [ ] –î–æ–¥–∞—Ç–∏ Execution –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ª–æ–≥—ñ–≤:
  - –í–∏–¥—ñ–ª—è—Ç–∏ –∑ —Å–µ—Å—ñ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç—ñ–≤/–∫–æ–º–∞–Ω–¥
  - –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ `Execution` –∑ –ø–æ–≤–Ω–∏–º–∏ –ª–æ–≥–∞–º–∏ (stdout, stderr)
  - –ó–≤'—è–∑–∫–∏: `(Session)-[:TRIGGERED]->(Execution)`, `(Execution)-[:USED_TOOL]->(Tool)`

#### –ó–∞–¥–∞—á—ñ (–§–∞–∑–∞ 3: –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è - –º–∞–π–±—É—Ç–Ω—î):
- [ ] –î–æ–¥–∞—Ç–∏ Scope –¥–ª—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è System/UserProject:
  - –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—É–∑–ª–∏ `Scope` (name: "System" | "UserProject")
  - –ó–≤'—è–∑–∫–∏: `(File)-[:BELONGS_TO]->(Scope)`, `(Tool)-[:OPERATES_IN]->(Scope)`
- [ ] –î–æ–¥–∞—Ç–∏ Protocol —Ç–∞ Instruction:
  - `Protocol` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π (trigger_keywords)
  - `Instruction` - –∞—Ç–æ–º–∞—Ä–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è (order –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ)
  - –ó–≤'—è–∑–∫–∏: `(Protocol)-[:COMPOSED_OF {order}]->(Instruction)`
- [ ] –î–æ–¥–∞—Ç–∏ Rule —Ç–∞ Preference:
  - `Rule` (type: 'system' | 'user_defined')
  - `Preference` - –º'—è–∫—ñ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - –ó–≤'—è–∑–∫–∏: `(User)-[:DEFINED]->(Rule)`, `(User)-[:PREFERS]->(Preference)`

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥—Ä–∞—Ñ—É –≤ FalkorDB (—Ä–æ–∑—à–∏—Ä–µ–Ω–∞):

**–ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–§–∞–∑–∞ 1):**
```
Session
  ‚îú‚îÄ Message (user)
  ‚îÇ   ‚îú‚îÄ Classification (sentiment, intent, complexity)
  ‚îÇ   ‚îî‚îÄ Entity ‚Üí EntityType
  ‚îî‚îÄ Message (assistant)
      ‚îú‚îÄ AnalysisNode
      ‚îÇ   ‚îú‚îÄ ActionNode
      ‚îÇ   ‚îî‚îÄ Entity ‚Üí EntityType
      ‚îú‚îÄ ResponseNode
      ‚îÇ   ‚îî‚îÄ Entity ‚Üí EntityType
      ‚îú‚îÄ QuestionsNode (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
      ‚îÇ   ‚îî‚îÄ Entity ‚Üí EntityType
      ‚îî‚îÄ Classification (response_type, complexity)
```

**–†–æ–∑—à–∏—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–§–∞–∑–∞ 2):**
```
User --(AUTHORED)--> Message (user)
                        |
                     (NEXT)
                        v
Agent --(AUTHORED)--> Message (assistant)
  |                      |
(INVOKED)            (NEXT)
  |                      v
Action --(USES)--> Tool
  |
(PRODUCED)
  |
Message (result) --(NEXT)--> Message (analysis)

Message --(MENTIONS {weight: 1.0})--> Entity
Message --(TRIGGERED)--> ContextFrame
ContextFrame --(LED_TO)--> Thought
Thought --(RESULTED_IN)--> Message

Session --(TRIGGERED)--> Execution
Execution --(USED_TOOL)--> Tool
Execution --(FAILED_WITH)--> Error (—è–∫—â–æ —î)
```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –°–∫—Ä–∏–ø—Ç –∑–±–µ—Ä—ñ–≥–∞—î —Å–µ—Å—ñ—ó —É FalkorDB –∑ –ø–æ–≤–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
- –í—Å—ñ –∑–≤'—è–∑–∫–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ (–≤–∫–ª—é—á–∞—é—á–∏ weighted edges)
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö —Å–µ—Å—ñ–π
- –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —Ñ–æ–Ω–æ–≤–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è (weighted edges)
- –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è Agent/User/Tool –¥–ª—è —Å–∞–º–æ—Å–≤—ñ–¥–æ–º–æ—Å—Ç—ñ –∞–≥–µ–Ω—Ç–∞

#### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
```bash
python scripts/save_to_falkordb.py --file saved_sessions/session_2026-01-20_falkordb_planning.md
```

#### –ü—Ä–∏–º—ñ—Ç–∫–∏:
- –§–∞–∑–∞ 1 - –º—ñ–Ω—ñ–º—É–º –¥–ª—è —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏
- –§–∞–∑–∞ 2 - —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É
- –§–∞–∑–∞ 3 - –º–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è (–º–æ–∂–Ω–∞ –≤—ñ–¥–∫–ª–∞—Å—Ç–∏ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –µ—Ç–∞–ø—ñ–≤)

---

### –ï—Ç–∞–ø 7: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥ `/db` —Ç–∞ `/ss` –∑ –∞–≥–µ–Ω—Ç–æ–º
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 2-3 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –í–∏—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–æ–∑–ø–æ—á–∞—Ç–æ

#### –ó–∞–¥–∞—á—ñ:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –∫–æ–º–∞–Ω–¥–∏ `/db [–∑–∞–ø–∏—Ç]`:
  - –ê–≥–µ–Ω—Ç —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –∫–æ–º–∞–Ω–¥—É `/db`
  - –í–∏–∫–ª–∏–∫–∞—î QPE Service `/api/v1/qpe/process-query` –∑ –∑–∞–ø–∏—Ç–æ–º
  - –û—Ç—Ä–∏–º—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
  - –§–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
  - –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –∫–æ–º–∞–Ω–¥–∏ `/ss`:
  - –ê–≥–µ–Ω—Ç —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –∫–æ–º–∞–Ω–¥—É `/ss`
  - –°—Ç–≤–æ—Ä—é—î `.md` —Ñ–∞–π–ª —É `saved_sessions/` –∑ –ø–æ—Ç–æ—á–Ω–æ—é —Å–µ—Å—ñ—î—é
  - –í–∏–∫–ª–∏–∫–∞—î —Å–∫—Ä–∏–ø—Ç `save_to_falkordb.py` –∑ —à–ª—è—Ö–æ–º –¥–æ —Ñ–∞–π–ª—É
  - –û—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
  - –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î —É—Å–ø—ñ—à–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω—É

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ö–æ–º–∞–Ω–¥–∏ `/db` —Ç–∞ `/ss` –ø—Ä–∞—Ü—é—é—Ç—å –ø–æ–≤–Ω—ñ—Å—Ç—é
- –ê–≥–µ–Ω—Ç –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ QPE –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- –ê–≥–µ–Ω—Ç –º–æ–∂–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å–µ—Å—ñ—ó –≤ FalkorDB
- –ü–æ–≤–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω –ø—Ä–∞—Ü—é—î –≤—ñ–¥ –∑–∞–ø–∏—Ç—É –¥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

---

### –ï—Ç–∞–ø 8: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 2-3 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –°–µ—Ä–µ–¥–Ω—ñ–π  
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–æ–∑–ø–æ—á–∞—Ç–æ

#### –ó–∞–¥–∞—á—ñ:
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ä–∞–∑–æ–º
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å QPE (—á–∞—Å –æ–±—Ä–æ–±–∫–∏)
- [ ] –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –¥–æ FalkorDB (Cypher queries)
- [ ] –î–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ —Ç–∞ retry –ª–æ–≥—ñ–∫—É
- [ ] –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é:
  - –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ `/db` —Ç–∞ `/ss`
  - –Ø–∫ –ø—Ä–∞—Ü—é—î QPE Service
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö —É FalkorDB
  - –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤ Cypher –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –°—Ç–∞–±—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ –≤—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

---

### –ï—Ç–∞–ø 9: –ú—ñ–≥—Ä–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–∏—Ö —Å–µ—Å—ñ–π (–ø—ñ–∑–Ω—ñ—à–µ)
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** 1-2 –¥–Ω—ñ  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑—å–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–æ–∑–ø–æ—á–∞—Ç–æ

#### –ó–∞–¥–∞—á—ñ:
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –º—ñ–≥—Ä–∞—Ü—ñ—ó –¥–ª—è –≤—Å—ñ—Ö `.md` —Ñ–∞–π–ª—ñ–≤ –∑ `saved_sessions/`
- [ ] –ü—Ä–æ–≥–Ω–∞—Ç–∏ –∫–æ–∂–Ω—É —Å–µ—Å—ñ—é —á–µ—Ä–µ–∑ QPE (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –ó–±–µ—Ä–µ–≥—Ç–∏ –≤—Å—ñ —Å–µ—Å—ñ—ó —É FalkorDB
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö
- [ ] –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –¥–∞–Ω—ñ –¥–æ —Ç–∞ –ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó

#### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –í—Å—ñ —ñ—Å–Ω—É—é—á—ñ —Å–µ—Å—ñ—ó –º—ñ–≥—Ä–æ–≤–∞–Ω—ñ —É FalkorDB
- –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤

---

## üîß –¢–µ—Ö–Ω—ñ—á–Ω–∏–π —Å—Ç–µ–∫

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:
- **FalkorDB** - –≥—Ä–∞—Ñ–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (Docker)
- **falkordb** (Python) - –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Python –∫–ª—ñ—î–Ω—Ç
- **Cypher** - –º–æ–≤–∞ –∑–∞–ø–∏—Ç—ñ–≤ –¥–ª—è –≥—Ä–∞—Ñ—É

### QPE Service:
- **Python 3.11+**
- **FastAPI** - REST API
- **transformers** - DeBERTa v3
- **torch** - –¥–ª—è –º–æ–¥–µ–ª–µ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è
- **gliner** - GLINER v2.1 –¥–ª—è –≤–∏–ª—É—á–µ–Ω–Ω—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π
- **ollama** –∞–±–æ **sentence-transformers** - –¥–ª—è EmbGEMMA embeddings

### –Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Docker Compose** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
- **Docker volumes** - persistence –¥–ª—è FalkorDB

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö —É FalkorDB

### –í—É–∑–ª–∏ (Nodes):

#### –ë–∞–∑–æ–≤—ñ –≤—É–∑–ª–∏:
- **Session** - —Å–µ—Å—ñ—è
  - `id` (UUID)
  - `topic` (string)
  - `created_at` (timestamp)
  - `metadata` (JSON)

- **Message** - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (—Ö—Ä–µ–±–µ—Ç –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏)
  - `id` (UUID)
  - `role` ('user' | 'assistant')
  - `content` (string, –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç, —Å–ª–æ–≤–æ –≤ —Å–ª–æ–≤–æ)
  - `embedding` (vector, –¥–ª—è user messages)
  - `created_at` (timestamp)

#### –í—É–∑–ª–∏ —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—ñ (–ë–ª–æ–∫ 1):
- **Agent** - –∞–≥–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Cursor AI)
  - `id` (UUID)
  - `name` (string, –Ω–∞–ø—Ä. "Cursor AI")
  - `version` (string, –Ω–∞–ø—Ä. "System 1.0")
  - `created_at` (timestamp)

- **User** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
  - `id` (UUID)
  - `name` (string)
  - `created_at` (timestamp)

- **Tool** - —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (—Å–∫—Ä–∏–ø—Ç, –∫–æ–º–∞–Ω–¥–∞, API)
  - `id` (UUID)
  - `name` (string, –Ω–∞–ø—Ä. "read_file", "GLiNER Entity Extractor")
  - `description` (string, –¥–ª—è LLM)
  - `type` (string: 'internal_script' | 'cli_command' | 'cursor_primitive')
  - `usage_instruction` (string, –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–ª–∏–∫—É)
  - `created_at` (timestamp)

- **Scope** - –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—ñ (System vs UserProject)
  - `id` (UUID)
  - `name` (string: "System" | "UserProject")
  - `description` (string)
  - `created_at` (timestamp)

#### –í—É–∑–ª–∏ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞:
- **AnalysisNode** - –∞–Ω–∞–ª—ñ–∑ —Ç–∞ –¥—ñ—ó
  - `id` (UUID)
  - `content` (string)
  - `embedding` (vector)

- **ResponseNode** - –æ—Å–Ω–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
  - `id` (UUID)
  - `content` (string)
  - `embedding` (vector)

- **QuestionsNode** - –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
  - `id` (UUID)
  - `content` (string)
  - `embedding` (vector)

- **ActionNode** - –æ–∫—Ä–µ–º–∞ –¥—ñ—è –∑ –∞–Ω–∞–ª—ñ–∑—É
  - `id` (UUID)
  - `content` (string)
  - `tool_name` (string, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
  - `result` (string, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

#### –í—É–∑–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞ –Ω–∞–≤—á–∞–Ω–Ω—è (–ë–ª–æ–∫ 2):
- **ContextFrame** - –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π –ø—Ä–æ–º–ø—Ç, —è–∫–∏–π –æ—Ç—Ä–∏–º–∞–≤ –∞–≥–µ–Ω—Ç
  - `id` (UUID)
  - `content` (string, –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –∑—ñ–±—Ä–∞–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É)
  - `timestamp` (timestamp)
  - `token_count` (int, –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω—ñ–≤)

- **Thought** - –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –∞–Ω–∞–ª—ñ–∑ –∞–≥–µ–Ω—Ç–∞
  - `id` (UUID)
  - `content` (string, —Ç–µ–∫—Å—Ç –º—ñ—Ä–∫—É–≤–∞–Ω—å)
  - `reasoning_type` (string: 'Planning' | 'Criticism' | 'Decision')
  - `created_at` (timestamp)

#### –í—É–∑–ª–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–ë–ª–æ–∫ 3):
- **Execution** - –∑–∞–ø–∏—Å –ø—Ä–æ –∑–∞–ø—É—Å–∫ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É/—Å–∫—Ä–∏–ø—Ç—É
  - `id` (UUID)
  - `command` (string, –ø–æ–≤–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)
  - `stdout` (string, –ü–û–í–ù–ò–ô –≤–∏–≤—ñ–¥ —É—Å–ø—ñ—Ö—É)
  - `stderr` (string, –ü–û–í–ù–ò–ô –≤–∏–≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫)
  - `exit_code` (int, 0 –∞–±–æ 1)
  - `status` (string: 'success' | 'failure')
  - `duration_ms` (int, —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è)
  - `timestamp` (timestamp)
  - `is_summarized` (bool, false –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ —Ñ–æ–Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞)
  - `summary` (string, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –ø—ñ—Å–ª—è —Å—É–º–∞—Ä–∏–∑–∞—Ü—ñ—ó)

- **Error** - —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∞ –ø–æ–º–∏–ª–∫–∞
  - `id` (UUID)
  - `type` (string, –Ω–∞–ø—Ä. "ImportError", "SyntaxError", "Timeout")
  - `fingerprint` (string, —Ö–µ—à –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–±–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫)
  - `message` (string, –∫–æ—Ä–æ—Ç–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)
  - `created_at` (timestamp)

#### –í—É–∑–ª–∏ –ø—Ä–∞–≤–∏–ª —Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤ (–ë–ª–æ–∫ 4):
- **Rule** - –ø—Ä–∞–≤–∏–ª–æ —Å–∏—Å—Ç–µ–º–∏
  - `id` (UUID)
  - `name` (string)
  - `type` (string: 'system' | 'user_defined')
  - `content` (string, —Ç–µ–∫—Å—Ç –ø—Ä–∞–≤–∏–ª–∞)
  - `created_at` (timestamp)

- **Preference** - –ø–µ—Ä–µ–≤–∞–≥–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–º'—è–∫–∞ —Ñ–æ—Ä–º–∞ –ø—Ä–∞–≤–∏–ª–∞)
  - `id` (UUID)
  - `content` (string, –Ω–∞–ø—Ä. "–ª—é–±–ª—é –∫—Ä–∞—Ç–∫—ñ—Å—Ç—å", "—Å–ø—ñ–ª–∫—É–π—Å—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é")
  - `created_at` (timestamp)

- **Protocol** - –ø—Ä–æ—Ç–æ–∫–æ–ª (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π)
  - `id` (UUID)
  - `name` (string, –Ω–∞–ø—Ä. "Database Migration Protocol")
  - `description` (string)
  - `trigger_keywords` (array of strings, –Ω–∞–ø—Ä. ["deploy", "migration", "ship"])
  - `created_at` (timestamp)

- **Instruction** - —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è (–∞—Ç–æ–º–∞—Ä–Ω–∞ –æ–¥–∏–Ω–∏—Ü—è –∑–Ω–∞–Ω–Ω—è)
  - `id` (UUID)
  - `name` (string)
  - `content` (string, —Ç–µ–∫—Å—Ç —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó)
  - `order` (int, –ø–æ—Ä—è–¥–æ–∫ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ, —è–∫—â–æ —î)
  - `created_at` (timestamp)

#### –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è:
- **Classification** - –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—É
  - `id` (UUID)
  - `sentiment` (string)
  - `intents` (array of strings)
  - `complexity` (string)

- **ResponseClassification** - –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  - `id` (UUID)
  - `response_type` (string)
  - `complexity` (string)

#### –°—É—â–Ω–æ—Å—Ç—ñ:
- **Entity** - –≤–∏–ª—É—á–µ–Ω–∞ —Å—É—Ç–Ω—ñ—Å—Ç—å (—Å–∏–Ω–∞–ø—Å–∏ –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è)
  - `id` (UUID)
  - `text` (string)
  - `start` (int)
  - `end` (int)
  - `embedding` (vector, –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É)
  - `type` (string, –Ω–∞–ø—Ä. "Technology", "Tool", "File")

- **EntityType** - —Ç–∏–ø —Å—É—Ç–Ω–æ—Å—Ç—ñ
  - `id` (UUID)
  - `name` (string): "Technology", "Tool", "File", —Ç–æ—â–æ

#### –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ–π–Ω—ñ –≤—É–∑–ª–∏ (–¥–ª—è –∑–≤'—è–∑—É–≤–∞–Ω–Ω—è):
- **Sentiment** - –≤—É–∑–æ–ª –¥–ª—è sentiment –∫–ª–∞—Å—É
  - `name`: "neutral", "positive_feedback", "negative_feedback", "frustrated"

- **Intent** - –≤—É–∑–æ–ª –¥–ª—è intent –∫–ª–∞—Å—É
  - `name`: "information_seeking", "task_execution", —Ç–æ—â–æ

- **Complexity** - –≤—É–∑–æ–ª –¥–ª—è complexity –∫–ª–∞—Å—É
  - `name`: "simple_question", "structured_prompt", —Ç–æ—â–æ

- **ResponseType** - –≤—É–∑–æ–ª –¥–ª—è —Ç–∏–ø—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  - `name`: "explanation", "code_proposal", "analysis", "question"

### –ó–≤'—è–∑–∫–∏ (Relationships):

#### –ë–∞–∑–æ–≤—ñ –∑–≤'—è–∑–∫–∏ (—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è):
- `(Session)-[:CONTAINS]->(Message)`
- `(Message)-[:NEXT]->(Message)` - —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å (–∫–ª—é—á–æ–≤–∞ –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–æ–∑–º–æ–≤–∏)
- `(Message)-[:REPLY_TO]->(Message)` - —è–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `(User)-[:AUTHORED]->(Message)` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–ø–∏—Å–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `(Agent)-[:AUTHORED]->(Message)` - –∞–≥–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

#### –ó–≤'—è–∑–∫–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:
- `(Message)-[:HAS_CLASSIFICATION]->(Classification)` (–¥–ª—è user messages)
- `(Message)-[:HAS_RESPONSE_CLASSIFICATION]->(ResponseClassification)` (–¥–ª—è assistant messages)

#### –ó–≤'—è–∑–∫–∏ –¥–ª—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π (weighted edges –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è):
- `(Message)-[:MENTIONS {weight: float, created_at: timestamp}]->(Entity)` - **weighted edge** –∑–∞–º—ñ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–≥–æ `[:HAS_ENTITY]`
- `(AnalysisNode)-[:MENTIONS {weight: float}]->(Entity)`
- `(ResponseNode)-[:MENTIONS {weight: float}]->(Entity)`
- `(QuestionsNode)-[:MENTIONS {weight: float}]->(Entity)` (—è–∫—â–æ —î)
- `(Entity)-[:IS_TYPE]->(EntityType)`
- **–í–∞–∂–ª–∏–≤–æ:** –í–∞–≥–∞ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ 1.0, —Ñ–æ–Ω–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –º–æ–∂–µ –ø—ñ–¥–≤–∏—â—É–≤–∞—Ç–∏/–∑–Ω–∏–∂—É–≤–∞—Ç–∏, –∞–ª–µ –∑–≤'—è–∑–∫–∏ –ù–ï –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è (Append-Only)

#### –ó–≤'—è–∑–∫–∏ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∞–≥–µ–Ω—Ç–∞:
- `(Message)-[:CONTAINS]->(AnalysisNode)`
- `(Message)-[:CONTAINS]->(ResponseNode)`
- `(Message)-[:CONTAINS]->(QuestionsNode)` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- `(AnalysisNode)-[:HAS_ACTION]->(ActionNode)`
- `(ActionNode)-[:USED_TOOL]->(Tool)` (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)
- `(ActionNode)-[:READ_FILE]->(Entity)` (—è–∫—â–æ —á–∏—Ç–∞–≤ —Ñ–∞–π–ª, Entity –∑ —Ç–∏–ø–æ–º "File")

#### –ó–≤'—è–∑–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞ –Ω–∞–≤—á–∞–Ω–Ω—è (–ë–ª–æ–∫ 2):
- `(Message:Inbound)-[:TRIGGERED]->(ContextFrame)` - –∑–∞–ø–∏—Ç –ø–æ—Ä–æ–¥–∏–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `(ContextFrame)-[:LED_TO]->(Thought)` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏–≤—ñ–≤ –¥–æ –º—ñ—Ä–∫—É–≤–∞–Ω—å
- `(Thought)-[:RESULTED_IN]->(Message:Outbound)` - –º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è –ø—Ä–∏–≤–µ–ª–∏ –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- `(ContextFrame)-[:INCLUDED]->(Rule)` - –≤ –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ
- `(ContextFrame)-[:INCLUDED]->(Instruction)` - –≤ –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–µ–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é
- `(ContextFrame)-[:INCLUDED]->(Message)` - –≤ –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–µ–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —ñ—Å—Ç–æ—Ä—ñ—ó
- `(ContextFrame)-[:INCLUDED]->(Protocol)` - –≤ –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–µ–Ω–æ –ø—Ä–æ—Ç–æ–∫–æ–ª

#### –ó–≤'—è–∑–∫–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–ë–ª–æ–∫ 3):
- `(Session)-[:TRIGGERED]->(Execution)` - —Å–µ—Å—ñ—è –∑–∞–ø—É—Å—Ç–∏–ª–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- `(Execution)-[:USED_TOOL]->(Tool)` - –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–ª–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
- `(Execution)-[:TARGETED]->(File)` - –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—Ü—ñ–ª–µ–Ω–µ –Ω–∞ —Ñ–∞–π–ª
- `(Execution)-[:FAILED_WITH]->(Error)` - –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å –ø–æ–º–∏–ª–∫–æ—é
- `(Execution)-[:PRODUCED_OUTPUT]->(Artifact)` - –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä–∏–ª–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
- `(ResponseNode)-[:CITES_TOOL_USAGE]->(Execution)` - –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- `(File)-[:BELONGS_TO]->(Scope)` - —Ñ–∞–π–ª –Ω–∞–ª–µ–∂–∏—Ç—å –æ–±–ª–∞—Å—Ç—ñ
- `(Tool)-[:OPERATES_IN]->(Scope)` - —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–∞—Ü—é—î –≤ –æ–±–ª–∞—Å—Ç—ñ
- `(Tool)-[:IMPLEMENTED_BY]->(File)` - —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ–∞–π–ª–æ–º

#### –ó–≤'—è–∑–∫–∏ –ø—Ä–∞–≤–∏–ª —Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤ (–ë–ª–æ–∫ 4):
- `(User)-[:DEFINED]->(Rule)` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä–∏–≤ –ø—Ä–∞–≤–∏–ª–æ
- `(User)-[:PREFERS]->(Preference)` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –ø–µ—Ä–µ–≤–∞–≥—É
- `(User)-[:LIKED]->(Message)` - –ø–æ–∑–∏—Ç–∏–≤–Ω–∏–π —Ñ—ñ–¥–±–µ–∫
- `(User)-[:DISLIKED]->(Message)` - –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏–π —Ñ—ñ–¥–±–µ–∫
- `(Protocol)-[:COMPOSED_OF {order: int}]->(Instruction)` - –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
- `(Protocol)-[:RESPECTS]->(Preference)` - –ø—Ä–æ—Ç–æ–∫–æ–ª –≤—Ä–∞—Ö–æ–≤—É—î –ø–µ—Ä–µ–≤–∞–≥—É
- `(Session)-[:EXECUTED_IN]->(Protocol)` - —Å–µ—Å—ñ—è –≤–∏–∫–æ–Ω–∞–ª–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª
- `(Message)-[:APPLIES]->(Instruction)` - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–ª–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é

#### –ó–≤'—è–∑–∫–∏ –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:
- `(Classification)-[:HAS_SENTIMENT]->(Sentiment)`
- `(Classification)-[:HAS_INTENT]->(Intent)` (–º–æ–∂–µ –±—É—Ç–∏ –∫—ñ–ª—å–∫–∞)
- `(Classification)-[:HAS_COMPLEXITY]->(Complexity)`
- `(ResponseClassification)-[:HAS_RESPONSE_TYPE]->(ResponseType)`
- `(ResponseClassification)-[:HAS_COMPLEXITY]->(Complexity)`

#### –ó–≤'—è–∑–∫–∏ –¥–ª—è –ø–æ—à—É–∫—É –ø–æ–¥—ñ–±–Ω–∏—Ö:
- `(Message)-[:SIMILAR_TO]->(Message)` (—á–µ—Ä–µ–∑ embeddings, —è–∫—â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è)

---

## üéØ –ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É

1. ‚úÖ FalkorDB –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Docker
2. ‚úÖ QPE Service –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞
3. ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/db` –ø—Ä–∞—Ü—é—î: –∞–≥–µ–Ω—Ç –æ—Ç—Ä–∏–º—É—î –∫–æ–Ω—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ QPE
4. ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/ss` –ø—Ä–∞—Ü—é—î: –∞–≥–µ–Ω—Ç –∑–±–µ—Ä—ñ–≥–∞—î —Å–µ—Å—ñ—ó —É FalkorDB
5. ‚úÖ –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î (—Ç—Ä–∏ –≤–∏–º—ñ—Ä–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤, –¥–≤–∞ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π)
6. ‚úÖ –í–∏–ª—É—á–µ–Ω–Ω—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π –ø—Ä–∞—Ü—é—î (GLINER –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π)
7. ‚úÖ Embeddings –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è
8. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥—Ä–∞—Ñ—É –∫–æ—Ä–µ–∫—Ç–Ω–∞ (–≤—Å—ñ –∑–≤'—è–∑–∫–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è)
9. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±—ñ–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î
10. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞

---

## üìù –ù–æ—Ç–∞—Ç–∫–∏ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è

### –¢–∏–º—á–∞—Å–æ–≤—ñ –∫–æ—Å—Ç–∏–ª—ñ:
- –ö–æ–º–∞–Ω–¥–∏ `/db` —Ç–∞ `/ss` - —Ç–∏–º—á–∞—Å–æ–≤—ñ –∫–æ—Å—Ç–∏–ª—ñ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é —Ç–∞ –Ω–∞–≤—á–∞–Ω–Ω—è
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è `.md` —Ñ–∞–π–ª—ñ–≤ - —Ç–∏–º—á–∞—Å–æ–≤–∏–π –∫–æ—Å—Ç–∏–ª—å –¥–ª—è –±–µ–∫–∞–ø—É
- –í –º–∞–π–±—É—Ç–Ω—å–æ–º—É: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –±–µ–∑ –∫–æ–º–∞–Ω–¥, –ø—Ä—è–º–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î

### –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è:
- –ü–æ—á–∞—Ç–æ–∫: —Ç—Ä–∏ –≤–∏–º—ñ—Ä–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó + –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ —Å—É—Ç–Ω–æ—Å—Ç–µ–π
- –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è: –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–ª–∞—Å—ñ–≤ —Ç–∞ —Ç–∏–ø—ñ–≤ —Å—É—Ç–Ω–æ—Å—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è: –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ —ñ—î—Ä–∞—Ä—Ö—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª–µ–π:
- –ù–∞ –ø–æ—á–∞—Ç–∫—É: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–æ–¥–µ–ª—ñ –±–µ–∑ fine-tuning
- –í –º–∞–π–±—É—Ç–Ω—å–æ–º—É: –º–æ–∂–ª–∏–≤–∏–π fine-tuning –Ω–∞ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö

### –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å:
- FalkorDB –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ –≤ Docker volumes
- –†–µ–≥—É–ª—è—Ä–Ω—ñ –±–µ–∫–∞–ø–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ
- `.md` —Ñ–∞–π–ª–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è —è–∫ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –±–µ–∫–∞–ø (—Ç–∏–º—á–∞—Å–æ–≤–æ)

---

## üîç –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü—Ä–∏–∫–ª–∞–¥ 1: –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–ó–∞–ø–∏—Ç:**
```
/db –Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏ —Å–µ—Å—ñ—é —É FalkorDB?
```

**–ü—Ä–æ—Ü–µ—Å:**
1. –ê–≥–µ–Ω—Ç –≤–∏–∫–ª–∏–∫–∞—î `POST /api/v1/qpe/process-query`
2. QPE –ø–æ–≤–µ—Ä—Ç–∞—î:
   ```json
   {
     "classifications": {
       "sentiment": "neutral",
       "intents": ["information_seeking"],
       "complexity": "simple_question"
     },
     "entities": [
       {"text": "FalkorDB", "type": "Database"},
       {"text": "—Å–µ—Å—ñ—è", "type": "Concept"}
     ],
     "embedding": [...]
   }
   ```
3. –ê–≥–µ–Ω—Ç —Ñ–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞

**–í—ñ–¥–ø–æ–≤—ñ–¥—å –∞–≥–µ–Ω—Ç–∞:**
```markdown
### –ê–Ω–∞–ª—ñ–∑ —Ç–∞ –¥—ñ—ó

1. –ü—Ä–æ—á–∏—Ç–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é FalkorDB
2. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç—É

### –í—ñ–¥–ø–æ–≤—ñ–¥—å

–î–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ—ó —É FalkorDB –ø–æ—Ç—Ä—ñ–±–Ω–æ...
```

**–ü—Ä–æ—Ü–µ—Å:**
1. –ê–≥–µ–Ω—Ç —Å—Ç–≤–æ—Ä—é—î `.md` —Ñ–∞–π–ª
2. –ê–≥–µ–Ω—Ç –≤–∏–∫–ª–∏–∫–∞—î `save_to_falkordb.py`
3. –°–∫—Ä–∏–ø—Ç –≤–∏–∫–ª–∏–∫–∞—î `POST /api/v1/qpe/process-assistant-response`
4. QPE –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ
5. –°–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä—é—î –≤—É–∑–ª–∏ —Ç–∞ –∑–≤'—è–∑–∫–∏ –≤ FalkorDB

---

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [FalkorDB Documentation](https://docs.falkordb.com/)
- [FalkorDB Python Client](https://github.com/FalkorDB/falkordb-py)
- [Cross-Encoder NLI DeBERTa v3 Model](https://huggingface.co/cross-encoder/nli-deberta-v3-base) (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è zero-shot –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó)
- [GLINER v2.1](https://github.com/urchade/gliner)
- [EmbGEMMA](https://ollama.com/library/embeddinggemma)

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 21 —Å—ñ—á–Ω—è 2026  
**–ê–≤—Ç–æ—Ä:** AI Agent + User  
**–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2.0

---

## üìö –î–∂–µ—Ä–µ–ª–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç—ñ `saved_sessions/Gemini_chat/2201.md`, –¥–µ –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω—ñ 4 –±–ª–æ–∫–∏ —Å–∏—Å—Ç–µ–º–∏ –ø–∞–º'—è—Ç—ñ:
- –ë–ª–æ–∫ 1: –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è (Session, Message, Agent, User, Tool, Rule)
- –ë–ª–æ–∫ 2: –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∞ –Ω–∞–≤—á–∞–Ω–Ω—è (Entity –∑ weighted edges, ContextFrame, Thought)
- –ë–ª–æ–∫ 3: –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (Scope, Tool, Execution, Error)
- –ë–ª–æ–∫ 4: –ü—Ä–æ—Ç–æ–∫–æ–ª–∏ —Ç–∞ –ø—Ä–æ–º–ø—Ç (Protocol, Instruction, Markdown –¥–æ 50k —Ç–æ–∫–µ–Ω—ñ–≤)
