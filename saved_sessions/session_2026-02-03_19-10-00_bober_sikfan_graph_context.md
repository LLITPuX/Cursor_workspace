# –ó–≤—ñ—Ç —Å–µ—Å—ñ—ó: Bober Sikfan Personality & Graph Context Fixes

**–î–∞—Ç–∞:** 2026-02-03
**–ß–∞—Å:** 19:10
**–°—Ç–∞—Ç—É—Å:** WIP (Work In Progress) - –≤–∏—è–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º –≥—Ä–∞—Ñ—É.

## üéØ –ú–µ—Ç–∞ —Å–µ—Å—ñ—ó
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ "Bober Sikfan" (—É—Å–ª—É–∂–ª–∏–≤–∏–π + –≤—ñ–¥–º–∞–∑–∫–∏).
- –î–∏–Ω–∞–º—ñ—á–Ω–∏–π —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç –∑ —ñ—Å—Ç–æ—Ä—ñ—î—é —á–∞—Ç—É –∑ –≥—Ä–∞—Ñ—É FalkorDB.
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (–∞–±—Ä–µ–≤—ñ–∞—Ç—É—Ä–∏, –∑–≤'—è–∑–∫–∏).

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ
1. **System Prompt & Personality:**
   - –°—Ç–≤–æ—Ä–µ–Ω–æ `core/prompts.py` –∑ –∫–æ—Ä–æ—Ç–∫–æ—é –æ—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—é.
   - –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `get_chat_context()` –≤ `FalkorDBProvider` (–ø–æ–≤–µ—Ä—Ç–∞—î –∞–≤—Ç–æ—Ä–∞, —Ç–µ–∫—Å—Ç, —á–∞—Å).
   - –û–Ω–æ–≤–ª–µ–Ω–æ `loop.py` —Ç–∞ `OllamaProvider` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ —ñ—Å—Ç–æ—Ä—ñ—ó —è–∫ –º–∞—Å–∏–≤—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è).

2. **Graph Data Fixes:**
   - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–±—Ä–µ–≤—ñ–∞—Ç—É—Ä—É "L" –Ω–∞ "MA" (Maks) –¥–ª—è 12 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.
   - –û–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥—ñ–∫—É `save_user_message`:
     - `MERGE` –¥–ª—è Chat/User/Day (–≥–∞—Ä–∞–Ω—Ç—ñ—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è).
     - –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –∞–±—Ä–µ–≤—ñ–∞—Ç—É—Ä–∞ (–ø–µ—Ä—à—ñ 2 –ª—ñ—Ç–µ—Ä–∏ –∞–±–æ —ñ–Ω—ñ—Ü—ñ–∞–ª–∏).
   - –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –∑–≤'—è–∑–∫–∏ `[:HAPPENED_IN]` –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤—ñ–¥–æ–º–∏–≤, —â–æ "–ø–µ—Ä—à–∏–π –ø–æ—Ç—ñ–∫ –ø–æ—á–∞–≤ –≤—Å–µ –ø–ª—É—Ç–∞—Ç–∏ —ñ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ä–µ–±—Ä–∞".
–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:
- –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –º—ñ–∂ `MERGE` —Ç–∞ —ñ—Å–Ω—É—é—á–∏–º–∏ –≤—É–∑–ª–∞–º–∏ (race conditions?).
- –í—Ç—Ä–∞—Ç–∞ —Ö—Ä–æ–Ω–æ–ª–æ–≥—ñ—ó (`[:NEXT]`) –ø—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç–∞—Ö.
- –ü–æ–º–∏–ª–∫–∏ –≤ Cypher-–∑–∞–ø–∏—Ç—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è (–ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–µ—Ç–∞–ª—å–Ω–∏–π –¥–µ–±–∞–≥).

**–ü–ª–∞–Ω –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω—É —Å–µ—Å—ñ—é:**
1. –î–µ–±–∞–≥ `save_user_message` (–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–±–µ—Ä on-the-fly).
2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–∞–Ω—Ü—é–∂–∫–∞ `[:NEXT]` —Ç–∞ `[:LAST_EVENT]`.
3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –Ω–æ–≤–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º/—á–∞—Ç–æ–º.
