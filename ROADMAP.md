# –î–æ—Ä–æ–∂–Ω—è –∫–∞—Ä—Ç–∞: Gemini Observer & Knowledge Graph

**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 02 –ª—é—Ç–æ–≥–æ 2026
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞ (–§–∞–∑–∞: Skills Integration)
**–í–µ—Ä—Å—ñ—è:** 3.0 (Event-Driven Architecture)

---

## üéØ –ú–µ—Ç–∞ –ø—Ä–æ–µ–∫—Ç—É

–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ AI-–∞–≥–µ–Ω—Ç–∞ **"Gemini Observer"**, —è–∫–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î —è–∫ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á —Ç–∞ –∞–∫—Ç–∏–≤–Ω–∏–π —É—á–∞—Å–Ω–∏–∫ –≤ Telegram-—á–∞—Ç–∞—Ö. –ê–≥–µ–Ω—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö –ø–æ–¥—ñ–π–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ (Event-Driven), –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ª–æ–∫–∞–ª—å–Ω—É –ø–∞–º'—è—Ç—å (FalkorDB) —Ç–∞ –º–∞—î —Ä–µ–∑–µ—Ä–≤–Ω–∏–π "Local Cortex" (Ollama) –¥–ª—è —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ.

**–ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å:** –ü–æ–≤–Ω–∞ —ñ–∑–æ–ª—è—Ü—ñ—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —á–µ—Ä–µ–∑ Redis Queues.
- **–°—Ç—ñ–π–∫—ñ—Å—Ç—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –Ω–∞ Local LLM –ø—Ä–∏ –≤—ñ–¥–º–æ–≤—ñ —Ö–º–∞—Ä–Ω–æ–≥–æ API.
- **–ì—Ä–∞—Ñ –ó–Ω–∞–Ω—å:** –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞ –∑–≤'—è–∑–∫—ñ–≤ —É FalkorDB.

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è

–°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥–º–æ–≤–∏–ª–∞—Å—è –≤—ñ–¥ –º–æ–Ω–æ–ª—ñ—Ç–Ω–æ–≥–æ REST API –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó —á–µ—Ä–µ–∑ —á–µ—Ä–≥–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

**–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
1.  **Listener (Telegram Bot):** –°–ª—É—Ö–∞—î –ø–æ–¥—ñ—ó –∑ Telegram, –ø–∞–∫—É—î —ó—Ö —É JSON —ñ –∫–ª–∞–¥–µ –≤ —á–µ—Ä–≥—É `telegram_updates`.
2.  **Brain (RalphLoop):** –û—Å–Ω–æ–≤–Ω–µ —è–¥—Ä–æ. –ß–∏—Ç–∞—î –∑ —á–µ—Ä–≥–∏, –ø—Ä–∏–π–º–∞—î —Ä—ñ—à–µ–Ω–Ω—è, –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ LLM (Gemini/Ollama) —Ç–∞ –ø–∞–º'—è—Ç—ñ, –∫–ª–∞–¥–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —É —á–µ—Ä–≥—É `agent_responses`.
3.  **Sender (Telegram Bot):** –ß–∏—Ç–∞—î –∑ —á–µ—Ä–≥–∏ `agent_responses` —ñ –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É.
4.  **Memory (FalkorDB):** –ì—Ä–∞—Ñ–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è.
5.  **Local Cortex (Ollama):** –õ–æ–∫–∞–ª—å–Ω–∞ LLM (`gemma2:2b`) –¥–ª—è —Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è.

**–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –¥–∏–≤. —É [ARCHITECTURE.md](ARCHITECTURE.md)**

---

## üìã –ï—Ç–∞–ø–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ï—Ç–∞–ø 1: Ignition Phase (–ë–∞–∑–æ–≤–∏–π –∑–∞–ø—É—Å–∫)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (31.01.2026)
- [x] –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Docker-—ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ (docker-compose).
- [x] –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è OAuth 2.0 –¥–ª—è Google Credentials (headless mechanism).
- [x] –ë–∞–∑–æ–≤–∏–π RalphLoop (—Ü–∏–∫–ª –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å).
- [x] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Telegram Bot API.
- [x] –ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ –∑ –º–æ–¥–µ–ª–ª—é `gemini-2.5-flash`.

### –ï—Ç–∞–ø 2: Local Cortex (–°—Ç—ñ–π–∫—ñ—Å—Ç—å)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (02.02.2026)
- [x] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è `ollama` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—É –º–µ—Ä–µ–∂—É.
- [x] –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó `LLMProvider`.
- [x] –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Circuit Breaker (–ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è Gemini -> Ollama –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö).
- [x] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —à–∞—Ä—É (`redis.asyncio`).
- [x] –†–æ–∑–ø–æ–¥—ñ–ª –Ω–∞ 3 –ø—Ä–æ—Ü–µ—Å–∏: Listener, Brain, Sender.

### –ï—Ç–∞–ø 2.5: Local Optimization & Benchmarking
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (02.02.2026)
- [x] Local Model Benchmark (The Arena): –í–∏–±—ñ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—ó –ª–æ–∫–∞–ª—å–Ω–æ—ó –º–æ–¥–µ–ª—ñ (`gemma3:4b` winner).
- [x] Graph Segregation: –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ –Ω–∞ `agent_memory` —Ç–∞ `group_chat_memory`.
- [x] System Prompt: –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `core/prompts.py` –¥–ª—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π Local Cortex.
- [x] Documentation Sync: –û–Ω–æ–≤–ª–µ–Ω–Ω—è ARCHITECTURE.md –Ω–∞ –æ—Å–Ω–æ–≤—ñ –±–µ–Ω—á–º–∞—Ä–∫—ñ–≤.

### –ï—Ç–∞–ø 3: Skills & Memory Integration
**–°—Ç–∞—Ç—É—Å:** üìÖ –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ
**–†–µ—Ñ–µ—Ä–µ–Ω—Å:** OpenClaw (`/memory`, `/skills`)
- [ ] –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–º'—è—Ç—ñ (Graph Memory).
- [ ] –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–æ–≤–∏—Ö –Ω–∞–≤–∏—á–æ–∫ (Skills System).
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ (Tools) —á–µ—Ä–µ–∑ Skills.
- [ ] –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ–π —É –≥—Ä–∞—Ñ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

### –ï—Ç–∞–ø 4: Advanced Reasoning & QPE
**–°—Ç–∞—Ç—É—Å:** üìÖ –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ (DeBERTa v3) —è–∫ –æ–∫—Ä–µ–º–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤/—Å–∫—ñ–ª—ñ–≤.
- [ ] –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Query Processing Engine (QPE) —è–∫ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –º–æ–¥—É–ª—è Brain.
- [ ] –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –æ–Ω—Ç–æ–ª–æ–≥—ñ—ó –≥—Ä–∞—Ñ–∞.

---

## üîß –¢–µ—Ö–Ω—ñ—á–Ω–∏–π —Å—Ç–µ–∫

### Core:
- **Python 3.11**
- **AsyncIO** (–æ—Å–Ω–æ–≤–∞ –∫–æ–Ω–∫–∞—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—ñ)

### –Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Docker & Docker Compose**
- **Redis** (Message Broker)
- **FalkorDB** (Knowledge Graph)
- **Ollama** (Local LLM Gateway)

### AI Models:
- **Primary:** Gemini 2.5 Flash / 2.0 Flash (Google Cloud)
- **Backup:** Gemma 2 2B (Local via Ollama)
- **Embeddings:** EmbeddingGemma (Local via Ollama)

---

## üîÑ –ü–∞–π–ø–ª–∞–π–Ω —Ä–æ–±–æ—Ç–∏ (–°–ø—Ä–æ—â–µ–Ω–∏–π)

1.  **User** –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
2.  **Listener** –æ—Ç—Ä–∏–º—É—î –∞–ø–¥–µ–π—Ç -> `redis:telegram_updates`.
3.  **Brain** –±–µ—Ä–µ –∑–∞–¥–∞—á—É:
    *   –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ–Ω—Ç–µ–∫—Å—Ç (Memory).
    *   –ü—Ä–æ–±—É—î Gemini (Primary).
    *   *–Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞* -> Local Cortex (Ollama Backup).
    *   –§–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å.
    *   –ü—É–±–ª—ñ–∫—É—î –≤ `redis:agent_responses`.
4.  **Sender** –±–µ—Ä–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å -> –Ω–∞–¥—Å–∏–ª–∞—î –≤ Telegram.

---

## üìö –î–∂–µ—Ä–µ–ª–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

- **Gemini Observer:** –ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (`gemini-observer/`).
- **OpenClaw:** –†–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è Memory/Skills (`reference_repos/openclaw`).
